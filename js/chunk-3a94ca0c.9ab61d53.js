(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a94ca0c"],{"05d4":function(t,e,i){"use strict";i("b9cd")},"10d0":function(t,e,i){},2209:function(t,e,i){},"250d":function(t,e,i){"use strict";i("9dfc")},"25a0":function(t,e,i){"use strict";i.d(e,"a",(function(){return N}));var s=i("8afd");function n(t,e=[]){return Object.keys(t).reduce((i,n)=>(e.includes(n)||(i[n]=Object(s["n"])(t[n])),i),{})}function o(t){return"function"===typeof t}function a(t){return Object(s["d"])(t)||Object(s["e"])(t)}function r(t,e,i,n){return t.call(n,Object(s["n"])(e),Object(s["n"])(i),n)}function l(t){return void 0!==t.$valid?!t.$valid:!t}function d(t,e,i,n,{$lazy:o,$rewardEarly:a},d,c,u=[],h,p,g){const m=Object(s["m"])(!!n.value),f=Object(s["m"])(0);i.value=!1;const v=Object(s["o"])([e,n].concat(u,g),()=>{if(o&&!n.value||a&&!p.value&&!i.value)return;let s;try{s=r(t,e,h,c)}catch(u){s=Promise.reject(u)}f.value++,i.value=!!f.value,m.value=!1,Promise.resolve(s).then(t=>{f.value--,i.value=!!f.value,d.value=t,m.value=l(t)}).catch(t=>{f.value--,i.value=!!f.value,d.value=t,m.value=!0})},{immediate:!0,deep:"object"===typeof e});return{$invalid:m,$unwatch:v}}function c(t,e,i,{$lazy:n,$rewardEarly:o},a,d,c,u){const h=()=>({}),p=Object(s["a"])(()=>{if(n&&!i.value||o&&!u.value)return!1;let s=!0;try{const i=r(t,e,c,d);a.value=i,s=l(i)}catch(h){a.value=h}return s});return{$unwatch:h,$invalid:p}}function u(t,e,i,a,r,l,u,h,p,g,m){const f=Object(s["m"])(!1),v=t.$params||{},b=Object(s["m"])(null);let w,y;t.$async?({$invalid:w,$unwatch:y}=d(t.$validator,e,f,i,a,b,r,t.$watchTargets,p,g,m)):({$invalid:w,$unwatch:y}=c(t.$validator,e,i,a,b,r,p,g));const _=t.$message,O=o(_)?Object(s["a"])(()=>_(n({$pending:f,$invalid:w,$params:n(v),$model:e,$response:b,$validator:l,$propertyPath:h,$property:u}))):_||"";return{$message:O,$params:v,$pending:f,$invalid:w,$response:b,$unwatch:y}}function h(t={}){const e=Object(s["n"])(t),i=Object.keys(e),n={},a={},r={};return i.forEach(t=>{const i=e[t];switch(!0){case o(i.$validator):n[t]=i;break;case o(i):n[t]={$validator:i};break;case t.startsWith("$"):r[t]=i;break;default:a[t]=i}}),{rules:n,nestedValidators:a,config:r}}function p(){}const g="__root";function m(t,e,i){if(i)return e?e(t()):t();try{var s=Promise.resolve(t());return e?s.then(e):s}catch(n){return Promise.reject(n)}}function f(t,e){return m(t,p,e)}function v(t,e){var i=t();return i&&i.then?i.then(e):e(i)}function b(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return Promise.resolve(t.apply(this,e))}catch(s){return Promise.reject(s)}}}function w(t,e,i,n,o,a,r,l,d){const c=Object.keys(t),h=n.get(o,t),p=Object(s["m"])(!1),g=Object(s["m"])(!1),m=Object(s["m"])(0);if(h){if(!h.$partial)return h;h.$unwatch(),p.value=h.$dirty.value}const f={$dirty:p,$path:o,$touch:()=>{p.value||(p.value=!0)},$reset:()=>{p.value&&(p.value=!1)},$commit:()=>{}};return c.length?(c.forEach(s=>{f[s]=u(t[s],e,f.$dirty,a,r,s,i,o,d,g,m)}),f.$externalResults=Object(s["a"])(()=>l.value?[].concat(l.value).map((t,e)=>({$propertyPath:o,$property:i,$validator:"$externalResults",$uid:`${o}-externalResult-${e}`,$message:t,$params:{},$response:null,$pending:!1})):[]),f.$invalid=Object(s["a"])(()=>{const t=c.some(t=>Object(s["n"])(f[t].$invalid));return g.value=t,!!f.$externalResults.value.length||t}),f.$pending=Object(s["a"])(()=>c.some(t=>Object(s["n"])(f[t].$pending))),f.$error=Object(s["a"])(()=>!!f.$dirty.value&&(f.$pending.value||f.$invalid.value)),f.$silentErrors=Object(s["a"])(()=>c.filter(t=>Object(s["n"])(f[t].$invalid)).map(t=>{const e=f[t];return Object(s["l"])({$propertyPath:o,$property:i,$validator:t,$uid:`${o}-${t}`,$message:e.$message,$params:e.$params,$response:e.$response,$pending:e.$pending})}).concat(f.$externalResults.value)),f.$errors=Object(s["a"])(()=>f.$dirty.value?f.$silentErrors.value:[]),f.$unwatch=()=>c.forEach(t=>{f[t].$unwatch()}),f.$commit=()=>{g.value=!0,m.value=Date.now()},n.set(o,t,f),f):(h&&n.set(o,t,f),f)}function y(t,e,i,s,n,o,a){const r=Object.keys(t);return r.length?r.reduce((r,l)=>(r[l]=O({validations:t[l],state:e,key:l,parentKey:i,resultsCache:s,globalConfig:n,instance:o,externalResults:a}),r),{}):{}}function _(t,e,i){const n=Object(s["a"])(()=>[e,i].filter(t=>t).reduce((t,e)=>t.concat(Object.values(Object(s["n"])(e))),[])),o=Object(s["a"])({get(){return t.$dirty.value||!!n.value.length&&n.value.every(t=>t.$dirty)},set(e){t.$dirty.value=e}}),a=Object(s["a"])(()=>{const e=Object(s["n"])(t.$silentErrors)||[],i=n.value.filter(t=>(Object(s["n"])(t).$silentErrors||[]).length).reduce((t,e)=>t.concat(...e.$silentErrors),[]);return e.concat(i)}),r=Object(s["a"])(()=>{const e=Object(s["n"])(t.$errors)||[],i=n.value.filter(t=>(Object(s["n"])(t).$errors||[]).length).reduce((t,e)=>t.concat(...e.$errors),[]);return e.concat(i)}),l=Object(s["a"])(()=>n.value.some(t=>t.$invalid)||Object(s["n"])(t.$invalid)||!1),d=Object(s["a"])(()=>n.value.some(t=>Object(s["n"])(t.$pending))||Object(s["n"])(t.$pending)||!1),c=Object(s["a"])(()=>n.value.some(t=>t.$dirty)||n.value.some(t=>t.$anyDirty)||o.value),u=Object(s["a"])(()=>!!o.value&&(d.value||l.value)),h=()=>{t.$touch(),n.value.forEach(t=>{t.$touch()})},p=()=>{t.$commit(),n.value.forEach(t=>{t.$commit()})},g=()=>{t.$reset(),n.value.forEach(t=>{t.$reset()})};return n.value.length&&n.value.every(t=>t.$dirty)&&h(),{$dirty:o,$errors:r,$invalid:l,$anyDirty:c,$error:u,$pending:d,$touch:h,$reset:g,$silentErrors:a,$commit:p}}function O({validations:t,state:e,key:i,parentKey:n,childResults:o,resultsCache:a,globalConfig:r={},instance:l,externalResults:d}){const c=b((function(){return S.value||M(),v((function(){if(C.$rewardEarly)return A(),f(s["h"])}),(function(){return m(s["h"],(function(){return new Promise(t=>{if(!D.value)return t(!L.value);const e=Object(s["o"])(D,()=>{t(!L.value),e()})})}))}))})),u=n?`${n}.${i}`:i,{rules:p,nestedValidators:O,config:x}=h(t),C=Object.assign({},r,x),T=i?Object(s["a"])(()=>{const t=Object(s["n"])(e);return t?Object(s["n"])(t[i]):void 0}):e,k=Object.assign({},Object(s["n"])(d)||{}),j=Object(s["a"])(()=>{const t=Object(s["n"])(d);return i?t?Object(s["n"])(t[i]):void 0:t}),E=w(p,T,i,a,u,C,l,j,e),N=y(O,T,u,a,C,l,j),{$dirty:S,$errors:$,$invalid:L,$anyDirty:B,$error:I,$pending:D,$touch:M,$reset:R,$silentErrors:V,$commit:A}=_(E,N,o),H=i?Object(s["a"])({get:()=>Object(s["n"])(T),set:t=>{S.value=!0;const n=Object(s["n"])(e),o=Object(s["n"])(d);o&&(o[i]=k[i]),Object(s["f"])(n[i])?n[i].value=t:n[i]=t}}):null;function z(t){return(o.value||{})[t]}function P(){Object(s["f"])(d)?d.value=k:0===Object.keys(k).length?Object.keys(d).forEach(t=>{delete d[t]}):Object.assign(d,k)}return i&&C.$autoDirty&&Object(s["o"])(T,()=>{S.value||M();const t=Object(s["n"])(d);t&&(t[i]=k[i])},{flush:"sync"}),Object(s["l"])(Object.assign({},E,{$model:H,$dirty:S,$error:I,$errors:$,$invalid:L,$anyDirty:B,$pending:D,$touch:M,$reset:R,$path:u||g,$silentErrors:V,$validate:c,$commit:A},o&&{$getResultsForChild:z,$clearExternalResults:P},N))}class x{constructor(){this.storage=new Map}set(t,e,i){this.storage.set(t,{rules:e,result:i})}checkRulesValidity(t,e,i){const n=Object.keys(i),o=Object.keys(e);if(o.length!==n.length)return!1;const a=o.every(t=>n.includes(t));return!!a&&o.every(t=>!e[t].$params||Object.keys(e[t].$params).every(n=>Object(s["n"])(i[t].$params[n])===Object(s["n"])(e[t].$params[n])))}get(t,e){const i=this.storage.get(t);if(!i)return;const{rules:s,result:n}=i,o=this.checkRulesValidity(t,e,s),a=n.$unwatch?n.$unwatch:()=>({});return o?n:{$dirty:n.$dirty,$partial:!0,$unwatch:a}}}const C={COLLECT_ALL:!0,COLLECT_NONE:!1},T=Symbol("vuelidate#injectChiildResults"),k=Symbol("vuelidate#removeChiildResults");function j({$scope:t,instance:e}){const i={},n=Object(s["m"])([]),o=Object(s["a"])(()=>n.value.reduce((t,e)=>(t[e]=Object(s["n"])(i[e]),t),{}));function a(e,{$registerAs:s,$scope:o,$stopPropagation:a}){a||t===C.COLLECT_NONE||o===C.COLLECT_NONE||t!==C.COLLECT_ALL&&t!==o||(i[s]=e,n.value.push(s))}function r(t){n.value=n.value.filter(e=>e!==t),delete i[t]}e.__vuelidateInjectInstances=[].concat(e.__vuelidateInjectInstances||[],a),e.__vuelidateRemoveInstances=[].concat(e.__vuelidateRemoveInstances||[],r);const l=Object(s["c"])(T,[]);Object(s["k"])(T,e.__vuelidateInjectInstances);const d=Object(s["c"])(k,[]);return Object(s["k"])(k,e.__vuelidateRemoveInstances),{childResults:o,sendValidationResultsToParent:l,removeValidationResultsFromParent:d}}function E(t){return new Proxy(t,{get(t,e){return"object"===typeof t[e]?E(t[e]):Object(s["a"])(()=>t[e])}})}function N(t,e,i={}){1===arguments.length&&(i=t,t=void 0,e=void 0);let{$registerAs:n,$scope:r=C.COLLECT_ALL,$stopPropagation:l,$externalResults:d,currentVueInstance:c}=i;const u=c||Object(s["b"])(),h=u?s["g"]?u.type:u.proxy.$options:{};if(!n&&u){const t=u.uid||u._uid;n="_vuelidate_"+t}const p=Object(s["m"])({}),g=new x,{childResults:m,sendValidationResultsToParent:f,removeValidationResultsFromParent:v}=u?j({$scope:r,instance:u}):{childResults:Object(s["m"])({})};if(!t&&h.validations){const t=h.validations;e=Object(s["m"])({}),Object(s["i"])(()=>{e.value=u.proxy,Object(s["o"])(()=>o(t)?t.call(e.value,new E(e.value)):t,t=>{p.value=O({validations:t,state:e,childResults:m,resultsCache:g,globalConfig:i,instance:u.proxy,externalResults:d||u.proxy.vuelidateExternalResults})},{immediate:!0})}),i=h.validationsConfig||i}else{const n=Object(s["f"])(t)||a(t)?t:Object(s["l"])(t||{});Object(s["o"])(n,t=>{p.value=O({validations:t,state:e,childResults:m,resultsCache:g,globalConfig:i,instance:u?u.proxy:{},externalResults:d})},{immediate:!0})}return u&&(f.forEach(t=>t(p,{$registerAs:n,$scope:r,$stopPropagation:l})),Object(s["j"])(()=>v.forEach(t=>t(n)))),Object(s["a"])(()=>Object.assign({},Object(s["n"])(p.value),m.value))}},"3db7":function(t,e,i){},"41e3":function(t,e,i){"use strict";i("2209")},4238:function(t,e,i){},"52e1":function(t,e,i){!function(e,i){t.exports=i()}("undefined"!=typeof self&&self,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return s}));class s{constructor(t,e=null,i=null){this.events={},this.container=t,this.precanvas=null,this.nodeId=1,this.ele_selected=null,this.node_selected=null,this.drag=!1,this.reroute=!1,this.reroute_fix_curvature=!1,this.curvature=.5,this.reroute_curvature_start_end=.5,this.reroute_curvature=.5,this.reroute_width=6,this.drag_point=!1,this.editor_selected=!1,this.connection=!1,this.connection_ele=null,this.connection_selected=null,this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_x_start=0,this.pos_y=0,this.pos_y_start=0,this.mouse_x=0,this.mouse_y=0,this.line_path=5,this.first_click=null,this.force_first_input=!1,this.draggable_inputs=!0,this.useuuid=!1,this.parent=i,this.noderegister={},this.render=e,this.drawflow={drawflow:{Home:{data:{}}}},this.module="Home",this.editor_mode="edit",this.zoom=1,this.zoom_max=1.6,this.zoom_min=.5,this.zoom_value=.1,this.zoom_last_value=1,this.evCache=new Array,this.prevDiff=-1}start(){this.container.classList.add("parent-drawflow"),this.container.tabIndex=0,this.precanvas=document.createElement("div"),this.precanvas.classList.add("drawflow"),this.container.appendChild(this.precanvas),this.container.addEventListener("mouseup",this.dragEnd.bind(this)),this.container.addEventListener("mousemove",this.position.bind(this)),this.container.addEventListener("mousedown",this.click.bind(this)),this.container.addEventListener("touchend",this.dragEnd.bind(this)),this.container.addEventListener("touchmove",this.position.bind(this)),this.container.addEventListener("touchstart",this.click.bind(this)),this.container.addEventListener("contextmenu",this.contextmenu.bind(this)),this.container.addEventListener("keydown",this.key.bind(this)),this.container.addEventListener("wheel",this.zoom_enter.bind(this)),this.container.addEventListener("input",this.updateNodeValue.bind(this)),this.container.addEventListener("dblclick",this.dblclick.bind(this)),this.container.onpointerdown=this.pointerdown_handler.bind(this),this.container.onpointermove=this.pointermove_handler.bind(this),this.container.onpointerup=this.pointerup_handler.bind(this),this.container.onpointercancel=this.pointerup_handler.bind(this),this.container.onpointerout=this.pointerup_handler.bind(this),this.container.onpointerleave=this.pointerup_handler.bind(this),this.load()}pointerdown_handler(t){this.evCache.push(t)}pointermove_handler(t){for(var e=0;e<this.evCache.length;e++)if(t.pointerId==this.evCache[e].pointerId){this.evCache[e]=t;break}if(2==this.evCache.length){var i=Math.abs(this.evCache[0].clientX-this.evCache[1].clientX);this.prevDiff>100&&(i>this.prevDiff&&this.zoom_in(),i<this.prevDiff&&this.zoom_out()),this.prevDiff=i}}pointerup_handler(t){this.remove_event(t),this.evCache.length<2&&(this.prevDiff=-1)}remove_event(t){for(var e=0;e<this.evCache.length;e++)if(this.evCache[e].pointerId==t.pointerId){this.evCache.splice(e,1);break}}load(){for(var t in this.drawflow.drawflow[this.module].data)this.addNodeImport(this.drawflow.drawflow[this.module].data[t],this.precanvas);if(this.reroute)for(var t in this.drawflow.drawflow[this.module].data)this.addRerouteImport(this.drawflow.drawflow[this.module].data[t]);for(var t in this.drawflow.drawflow[this.module].data)this.updateConnectionNodes("node-"+t);const e=this.drawflow.drawflow;let i=1;Object.keys(e).map((function(t,s){Object.keys(e[t].data).map((function(t,e){parseInt(t)>=i&&(i=parseInt(t)+1)}))})),this.nodeId=i}removeReouteConnectionSelected(){this.dispatch("connectionUnselected",!0),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((t,e)=>{t.classList.remove("selected")})}click(t){if(this.dispatch("click",t),"fixed"===this.editor_mode){if("parent-drawflow"!==t.target.classList[0]&&"drawflow"!==t.target.classList[0])return!1;this.ele_selected=t.target.closest(".parent-drawflow")}else"view"===this.editor_mode?(null!=t.target.closest(".drawflow")||t.target.matches(".parent-drawflow"))&&(this.ele_selected=t.target.closest(".parent-drawflow"),t.preventDefault()):(this.first_click=t.target,this.ele_selected=t.target,0===t.button&&this.contextmenuDel(),null!=t.target.closest(".drawflow_content_node")&&(this.ele_selected=t.target.closest(".drawflow_content_node").parentElement));switch(this.ele_selected.classList[0]){case"drawflow-node":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected!=this.ele_selected&&this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.node_selected!=this.ele_selected&&this.dispatch("nodeSelected",this.ele_selected.id.slice(5)),this.node_selected=this.ele_selected,this.node_selected.classList.add("selected"),this.draggable_inputs?"SELECT"!==t.target.tagName&&(this.drag=!0):"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&"SELECT"!==t.target.tagName&&!0!==t.target.hasAttribute("contenteditable")&&(this.drag=!0);break;case"output":this.connection=!0,null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.drawConnection(t.target);break;case"parent-drawflow":case"drawflow":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.editor_selected=!0;break;case"main-path":null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.connection_selected=this.ele_selected,this.connection_selected.classList.add("selected");const e=this.connection_selected.parentElement.classList;this.dispatch("connectionSelected",{output_id:e[2].slice(14),input_id:e[1].slice(13),output_class:e[3],input_class:e[4]}),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((t,e)=>{t.classList.add("selected")});break;case"point":this.drag_point=!0,this.ele_selected.classList.add("selected");break;case"drawflow-delete":this.node_selected&&this.removeNodeId(this.node_selected.id),this.connection_selected&&this.removeConnection(),null!=this.node_selected&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),null!=this.connection_selected&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null)}"touchstart"===t.type?(this.pos_x=t.touches[0].clientX,this.pos_x_start=t.touches[0].clientX,this.pos_y=t.touches[0].clientY,this.pos_y_start=t.touches[0].clientY):(this.pos_x=t.clientX,this.pos_x_start=t.clientX,this.pos_y=t.clientY,this.pos_y_start=t.clientY),this.dispatch("clickEnd",t)}position(t){if("touchmove"===t.type)var e=t.touches[0].clientX,i=t.touches[0].clientY;else e=t.clientX,i=t.clientY;if(this.connection&&this.updateConnection(e,i),this.editor_selected&&(s=this.canvas_x+-(this.pos_x-e),n=this.canvas_y+-(this.pos_y-i),this.dispatch("translate",{x:s,y:n}),this.precanvas.style.transform="translate("+s+"px, "+n+"px) scale("+this.zoom+")"),this.drag){var s=(this.pos_x-e)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),n=(this.pos_y-i)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom);this.pos_x=e,this.pos_y=i,this.ele_selected.style.top=this.ele_selected.offsetTop-n+"px",this.ele_selected.style.left=this.ele_selected.offsetLeft-s+"px",this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_x=this.ele_selected.offsetLeft-s,this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_y=this.ele_selected.offsetTop-n,this.updateConnectionNodes(this.ele_selected.id)}if(this.drag_point){s=(this.pos_x-e)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),n=(this.pos_y-i)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom),this.pos_x=e,this.pos_y=i;var o=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),a=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));this.ele_selected.setAttributeNS(null,"cx",o),this.ele_selected.setAttributeNS(null,"cy",a);const t=this.ele_selected.parentElement.classList[2].slice(9),r=this.ele_selected.parentElement.classList[1].slice(13),l=this.ele_selected.parentElement.classList[3],d=this.ele_selected.parentElement.classList[4];let c=Array.from(this.ele_selected.parentElement.children).indexOf(this.ele_selected)-1;this.reroute_fix_curvature&&(c-=this.ele_selected.parentElement.querySelectorAll(".main-path").length-1,c<0&&(c=0));const u=t.slice(5),h=this.drawflow.drawflow[this.module].data[u].outputs[l].connections.findIndex((function(t,e){return t.node===r&&t.output===d}));this.drawflow.drawflow[this.module].data[u].outputs[l].connections[h].points[c]={pos_x:o,pos_y:a};const p=this.ele_selected.parentElement.classList[2].slice(9);this.updateConnectionNodes(p)}"touchmove"===t.type&&(this.mouse_x=e,this.mouse_y=i),this.dispatch("mouseMove",{x:e,y:i})}dragEnd(t){if("touchend"===t.type)var e=this.mouse_x,i=this.mouse_y,s=document.elementFromPoint(e,i);else e=t.clientX,i=t.clientY,s=t.target;if(this.drag&&(this.pos_x_start==e&&this.pos_y_start==i||this.dispatch("nodeMoved",this.ele_selected.id.slice(5))),this.drag_point&&(this.ele_selected.classList.remove("selected"),this.pos_x_start==e&&this.pos_y_start==i||this.dispatch("rerouteMoved",this.ele_selected.parentElement.classList[2].slice(14))),this.editor_selected&&(this.canvas_x=this.canvas_x+-(this.pos_x-e),this.canvas_y=this.canvas_y+-(this.pos_y-i),this.editor_selected=!1),!0===this.connection)if("input"===s.classList[0]||this.force_first_input&&(null!=s.closest(".drawflow_content_node")||"drawflow-node"===s.classList[0])){if(!this.force_first_input||null==s.closest(".drawflow_content_node")&&"drawflow-node"!==s.classList[0])n=s.parentElement.parentElement.id,o=s.classList[1];else{if(null!=s.closest(".drawflow_content_node"))var n=s.closest(".drawflow_content_node").parentElement.id;else n=s.id;if(0===Object.keys(this.getNodeFromId(n.slice(5)).inputs).length)var o=!1;else o="input_1"}var a=this.ele_selected.parentElement.parentElement.id,r=this.ele_selected.classList[1];if(a!==n&&!1!==o){if(0===this.container.querySelectorAll(".connection.node_in_"+n+".node_out_"+a+"."+r+"."+o).length){this.connection_ele.classList.add("node_in_"+n),this.connection_ele.classList.add("node_out_"+a),this.connection_ele.classList.add(r),this.connection_ele.classList.add(o);var l=n.slice(5),d=a.slice(5);this.drawflow.drawflow[this.module].data[d].outputs[r].connections.push({node:l,output:o}),this.drawflow.drawflow[this.module].data[l].inputs[o].connections.push({node:d,input:r}),this.updateConnectionNodes("node-"+d),this.updateConnectionNodes("node-"+l),this.dispatch("connectionCreated",{output_id:d,input_id:l,output_class:r,input_class:o})}else this.dispatch("connectionCancel",!0),this.connection_ele.remove();this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null;this.drag=!1,this.drag_point=!1,this.connection=!1,this.ele_selected=null,this.editor_selected=!1,this.dispatch("mouseUp",t)}contextmenu(t){if(this.dispatch("contextmenu",t),t.preventDefault(),"fixed"===this.editor_mode||"view"===this.editor_mode)return!1;if(this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove(),this.node_selected||this.connection_selected){var e=document.createElement("div");e.classList.add("drawflow-delete"),e.innerHTML="x",this.node_selected&&this.node_selected.appendChild(e),this.connection_selected&&(e.style.top=t.clientY*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))+"px",e.style.left=t.clientX*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))+"px",this.precanvas.appendChild(e))}}contextmenuDel(){this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove()}key(t){if(this.dispatch("keydown",t),"fixed"===this.editor_mode||"view"===this.editor_mode)return!1;("Delete"===t.key||"Backspace"===t.key&&t.metaKey)&&(null!=this.node_selected&&"INPUT"!==this.first_click.tagName&&"TEXTAREA"!==this.first_click.tagName&&!0!==this.first_click.hasAttribute("contenteditable")&&this.removeNodeId(this.node_selected.id),null!=this.connection_selected&&this.removeConnection())}zoom_enter(t,e){t.ctrlKey&&(t.preventDefault(),t.deltaY>0?this.zoom_out():this.zoom_in())}zoom_refresh(){this.dispatch("zoom",this.zoom),this.canvas_x=this.canvas_x/this.zoom_last_value*this.zoom,this.canvas_y=this.canvas_y/this.zoom_last_value*this.zoom,this.zoom_last_value=this.zoom,this.precanvas.style.transform="translate("+this.canvas_x+"px, "+this.canvas_y+"px) scale("+this.zoom+")"}zoom_in(){this.zoom<this.zoom_max&&(this.zoom+=this.zoom_value,this.zoom_refresh())}zoom_out(){this.zoom>this.zoom_min&&(this.zoom-=this.zoom_value,this.zoom_refresh())}zoom_reset(){1!=this.zoom&&(this.zoom=1,this.zoom_refresh())}createCurvature(t,e,i,s,n,o){var a=t,r=e,l=i,d=s,c=n;switch(o){case"open":if(t>=i)var u=a+Math.abs(l-a)*c,h=l-Math.abs(l-a)*(-1*c);else u=a+Math.abs(l-a)*c,h=l-Math.abs(l-a)*c;return" M "+a+" "+r+" C "+u+" "+r+" "+h+" "+d+" "+l+"  "+d;case"close":return t>=i?(u=a+Math.abs(l-a)*(-1*c),h=l-Math.abs(l-a)*c):(u=a+Math.abs(l-a)*c,h=l-Math.abs(l-a)*c)," M "+a+" "+r+" C "+u+" "+r+" "+h+" "+d+" "+l+"  "+d;case"other":return t>=i?(u=a+Math.abs(l-a)*(-1*c),h=l-Math.abs(l-a)*(-1*c)):(u=a+Math.abs(l-a)*c,h=l-Math.abs(l-a)*c)," M "+a+" "+r+" C "+u+" "+r+" "+h+" "+d+" "+l+"  "+d;default:return" M "+a+" "+r+" C "+(u=a+Math.abs(l-a)*c)+" "+r+" "+(h=l-Math.abs(l-a)*c)+" "+d+" "+l+"  "+d}}drawConnection(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this.connection_ele=e;var i=document.createElementNS("http://www.w3.org/2000/svg","path");i.classList.add("main-path"),i.setAttributeNS(null,"d",""),e.classList.add("connection"),e.appendChild(i),this.precanvas.appendChild(e);var s=t.parentElement.parentElement.id.slice(5),n=t.classList[1];this.dispatch("connectionStart",{output_id:s,output_class:n})}updateConnection(t,e){const i=this.precanvas,s=this.zoom;let n=i.clientWidth/(i.clientWidth*s);n=n||0;let o=i.clientHeight/(i.clientHeight*s);o=o||0;var a=this.connection_ele.children[0],r=this.ele_selected.offsetWidth/2+(this.ele_selected.getBoundingClientRect().x-i.getBoundingClientRect().x)*n,l=this.ele_selected.offsetHeight/2+(this.ele_selected.getBoundingClientRect().y-i.getBoundingClientRect().y)*o,d=t*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),c=e*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom)),u=this.curvature,h=this.createCurvature(r,l,d,c,u,"openclose");a.setAttributeNS(null,"d",h)}addConnection(t,e,i,s){var n=this.getModuleFromNodeId(t);if(n===this.getModuleFromNodeId(e)){var o=this.getNodeFromId(t),a=!1;for(var r in o.outputs[i].connections){var l=o.outputs[i].connections[r];l.node==e&&l.output==s&&(a=!0)}if(!1===a){if(this.drawflow.drawflow[n].data[t].outputs[i].connections.push({node:e.toString(),output:s}),this.drawflow.drawflow[n].data[e].inputs[s].connections.push({node:t.toString(),input:i}),this.module===n){var d=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=document.createElementNS("http://www.w3.org/2000/svg","path");c.classList.add("main-path"),c.setAttributeNS(null,"d",""),d.classList.add("connection"),d.classList.add("node_in_node-"+e),d.classList.add("node_out_node-"+t),d.classList.add(i),d.classList.add(s),d.appendChild(c),this.precanvas.appendChild(d),this.updateConnectionNodes("node-"+t),this.updateConnectionNodes("node-"+e)}this.dispatch("connectionCreated",{output_id:t,input_id:e,output_class:i,input_class:s})}}}updateConnectionNodes(t){const e="node_in_"+t,i="node_out_"+t;this.line_path;const s=this.container,n=this.precanvas,o=this.curvature,a=this.createCurvature,r=this.reroute_curvature,l=this.reroute_curvature_start_end,d=this.reroute_fix_curvature,c=this.reroute_width,u=this.zoom;let h=n.clientWidth/(n.clientWidth*u);h=h||0;let p=n.clientHeight/(n.clientHeight*u);p=p||0;const g=s.querySelectorAll("."+i);Object.keys(g).map((function(e,i){if(null===g[e].querySelector(".point")){var m=s.querySelector("#"+t),f=g[e].classList[1].replace("node_in_",""),v=s.querySelector("#"+f).querySelectorAll("."+g[e].classList[4])[0],b=v.offsetWidth/2+(v.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,w=v.offsetHeight/2+(v.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,y=m.querySelectorAll("."+g[e].classList[3])[0],_=y.offsetWidth/2+(y.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,O=y.offsetHeight/2+(y.getBoundingClientRect().y-n.getBoundingClientRect().y)*p;const i=a(_,O,b,w,o,"openclose");g[e].children[0].setAttributeNS(null,"d",i)}else{const i=g[e].querySelectorAll(".point");let o="";const m=[];i.forEach((e,d)=>{if(0===d&&i.length-1==0){var g=s.querySelector("#"+t),f=((O=e).getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,v=(O.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,b=(x=g.querySelectorAll("."+e.parentElement.classList[3])[0]).offsetWidth/2+(x.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,w=x.offsetHeight/2+(x.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,y=a(b,w,f,v,l,"open");o+=y,m.push(y),g=e;var _=e.parentElement.classList[1].replace("node_in_",""),O=(C=s.querySelector("#"+_)).querySelectorAll("."+e.parentElement.classList[4])[0];f=(T=C.querySelectorAll("."+e.parentElement.classList[4])[0]).offsetWidth/2+(T.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,v=T.offsetHeight/2+(T.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,b=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,w=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,y=a(b,w,f,v,l,"close"),o+=y,m.push(y)}else if(0===d){var x;g=s.querySelector("#"+t),f=((O=e).getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,v=(O.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,b=(x=g.querySelectorAll("."+e.parentElement.classList[3])[0]).offsetWidth/2+(x.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,w=x.offsetHeight/2+(x.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,y=a(b,w,f,v,l,"open"),o+=y,m.push(y),g=e,f=((O=i[d+1]).getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,v=(O.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,b=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,w=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,y=a(b,w,f,v,r,"other"),o+=y,m.push(y)}else if(d===i.length-1){var C,T;g=e,_=e.parentElement.classList[1].replace("node_in_",""),O=(C=s.querySelector("#"+_)).querySelectorAll("."+e.parentElement.classList[4])[0],f=(T=C.querySelectorAll("."+e.parentElement.classList[4])[0]).offsetWidth/2+(T.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,v=T.offsetHeight/2+(T.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,b=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*(n.clientWidth/(n.clientWidth*u))+c,w=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*(n.clientHeight/(n.clientHeight*u))+c,y=a(b,w,f,v,l,"close"),o+=y,m.push(y)}else g=e,f=((O=i[d+1]).getBoundingClientRect().x-n.getBoundingClientRect().x)*(n.clientWidth/(n.clientWidth*u))+c,v=(O.getBoundingClientRect().y-n.getBoundingClientRect().y)*(n.clientHeight/(n.clientHeight*u))+c,b=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*(n.clientWidth/(n.clientWidth*u))+c,w=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*(n.clientHeight/(n.clientHeight*u))+c,y=a(b,w,f,v,r,"other"),o+=y,m.push(y)}),d?m.forEach((t,i)=>{g[e].children[i].setAttributeNS(null,"d",t)}):g[e].children[0].setAttributeNS(null,"d",o)}}));const m=s.querySelectorAll("."+e);Object.keys(m).map((function(e,i){if(null===m[e].querySelector(".point")){var u=s.querySelector("#"+t),g=m[e].classList[2].replace("node_out_",""),f=s.querySelector("#"+g).querySelectorAll("."+m[e].classList[3])[0],v=f.offsetWidth/2+(f.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,b=f.offsetHeight/2+(f.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,w=(u=u.querySelectorAll("."+m[e].classList[4])[0]).offsetWidth/2+(u.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,y=u.offsetHeight/2+(u.getBoundingClientRect().y-n.getBoundingClientRect().y)*p;const i=a(v,b,w,y,o,"openclose");m[e].children[0].setAttributeNS(null,"d",i)}else{const i=m[e].querySelectorAll(".point");let o="";const u=[];i.forEach((e,d)=>{if(0===d&&i.length-1==0){var g=s.querySelector("#"+t),m=((_=e).getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,f=(_.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,v=(C=g.querySelectorAll("."+e.parentElement.classList[4])[0]).offsetWidth/2+(C.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,b=C.offsetHeight/2+(C.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,w=a(m,f,v,b,l,"close");o+=w,u.push(w),g=e;var y=e.parentElement.classList[2].replace("node_out_",""),_=(x=s.querySelector("#"+y)).querySelectorAll("."+e.parentElement.classList[3])[0];m=(O=x.querySelectorAll("."+e.parentElement.classList[3])[0]).offsetWidth/2+(O.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,f=O.offsetHeight/2+(O.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,v=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,b=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,w=a(m,f,v,b,l,"open"),o+=w,u.push(w)}else if(0===d){var O;g=e,y=e.parentElement.classList[2].replace("node_out_",""),_=(x=s.querySelector("#"+y)).querySelectorAll("."+e.parentElement.classList[3])[0],m=(O=x.querySelectorAll("."+e.parentElement.classList[3])[0]).offsetWidth/2+(O.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,f=O.offsetHeight/2+(O.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,v=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,b=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,w=a(m,f,v,b,l,"open"),o+=w,u.push(w),g=e,v=((_=i[d+1]).getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,b=(_.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,m=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,f=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,w=a(m,f,v,b,r,"other"),o+=w,u.push(w)}else if(d===i.length-1){var x,C;g=e,y=e.parentElement.classList[1].replace("node_in_",""),_=(x=s.querySelector("#"+y)).querySelectorAll("."+e.parentElement.classList[4])[0],v=(C=x.querySelectorAll("."+e.parentElement.classList[4])[0]).offsetWidth/2+(C.getBoundingClientRect().x-n.getBoundingClientRect().x)*h,b=C.offsetHeight/2+(C.getBoundingClientRect().y-n.getBoundingClientRect().y)*p,m=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,f=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,w=a(m,f,v,b,l,"close"),o+=w,u.push(w)}else g=e,v=((_=i[d+1]).getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,b=(_.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,m=(g.getBoundingClientRect().x-n.getBoundingClientRect().x)*h+c,f=(g.getBoundingClientRect().y-n.getBoundingClientRect().y)*p+c,w=a(m,f,v,b,r,"other"),o+=w,u.push(w)}),d?u.forEach((t,i)=>{m[e].children[i].setAttributeNS(null,"d",t)}):m[e].children[0].setAttributeNS(null,"d",o)}}))}dblclick(t){null!=this.connection_selected&&this.reroute&&this.createReroutePoint(this.connection_selected),"point"===t.target.classList[0]&&this.removeReroutePoint(t.target)}createReroutePoint(t){this.connection_selected.classList.remove("selected");const e=this.connection_selected.parentElement.classList[2].slice(9),i=this.connection_selected.parentElement.classList[1].slice(13),s=this.connection_selected.parentElement.classList[3],n=this.connection_selected.parentElement.classList[4];this.connection_selected=null;const o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.classList.add("point");var a=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),r=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));o.setAttributeNS(null,"cx",a),o.setAttributeNS(null,"cy",r),o.setAttributeNS(null,"r",this.reroute_width);let l=0;if(this.reroute_fix_curvature){const e=t.parentElement.querySelectorAll(".main-path").length;var d=document.createElementNS("http://www.w3.org/2000/svg","path");if(d.classList.add("main-path"),d.setAttributeNS(null,"d",""),t.parentElement.insertBefore(d,t.parentElement.children[e]),1===e)t.parentElement.appendChild(o);else{const i=Array.from(t.parentElement.children).indexOf(t);l=i,t.parentElement.insertBefore(o,t.parentElement.children[i+e+1])}}else t.parentElement.appendChild(o);const c=e.slice(5),u=this.drawflow.drawflow[this.module].data[c].outputs[s].connections.findIndex((function(t,e){return t.node===i&&t.output===n}));void 0===this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points&&(this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points=[]),this.reroute_fix_curvature?(l>0?this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points.splice(l,0,{pos_x:a,pos_y:r}):this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points.push({pos_x:a,pos_y:r}),t.parentElement.querySelectorAll(".main-path").forEach((t,e)=>{t.classList.remove("selected")})):this.drawflow.drawflow[this.module].data[c].outputs[s].connections[u].points.push({pos_x:a,pos_y:r}),this.dispatch("addReroute",c),this.updateConnectionNodes(e)}removeReroutePoint(t){const e=t.parentElement.classList[2].slice(9),i=t.parentElement.classList[1].slice(13),s=t.parentElement.classList[3],n=t.parentElement.classList[4];let o=Array.from(t.parentElement.children).indexOf(t)-1;const a=e.slice(5),r=this.drawflow.drawflow[this.module].data[a].outputs[s].connections.findIndex((function(t,e){return t.node===i&&t.output===n}));if(this.reroute_fix_curvature){const e=t.parentElement.querySelectorAll(".main-path").length;t.parentElement.children[e-1].remove(),o-=e,o<0&&(o=0)}this.drawflow.drawflow[this.module].data[a].outputs[s].connections[r].points.splice(o,1),t.remove(),this.dispatch("removeReroute",a),this.updateConnectionNodes(e)}registerNode(t,e,i=null,s=null){this.noderegister[t]={html:e,props:i,options:s}}getNodeFromId(t){var e=this.getModuleFromNodeId(t);return JSON.parse(JSON.stringify(this.drawflow.drawflow[e].data[t]))}getNodesFromName(t){var e=[];const i=this.drawflow.drawflow;return Object.keys(i).map((function(s,n){for(var o in i[s].data)i[s].data[o].name==t&&e.push(i[s].data[o].id)})),e}addNode(t,e,i,s,n,o,a,r,l=!1){if(this.useuuid)var d=this.getUuid();else d=this.nodeId;const c=document.createElement("div");c.classList.add("parent-node");const u=document.createElement("div");u.innerHTML="",u.setAttribute("id","node-"+d),u.classList.add("drawflow-node"),""!=o&&u.classList.add(o);const h=document.createElement("div");h.classList.add("inputs");const p=document.createElement("div");p.classList.add("outputs");const g={};for(var m=0;m<e;m++){const t=document.createElement("div");t.classList.add("input"),t.classList.add("input_"+(m+1)),g["input_"+(m+1)]={connections:[]},h.appendChild(t)}const f={};for(m=0;m<i;m++){const t=document.createElement("div");t.classList.add("output"),t.classList.add("output_"+(m+1)),f["output_"+(m+1)]={connections:[]},p.appendChild(t)}const v=document.createElement("div");if(v.classList.add("drawflow_content_node"),!1===l)v.innerHTML=r;else if(!0===l)v.appendChild(this.noderegister[r].html.cloneNode(!0));else if(3===parseInt(this.render.version)){let t=this.render.h(this.noderegister[r].html,this.noderegister[r].props,this.noderegister[r].options);t.appContext=this.parent,this.render.render(t,v)}else{let t=new this.render({parent:this.parent,render:t=>t(this.noderegister[r].html,{props:this.noderegister[r].props}),...this.noderegister[r].options}).$mount();v.appendChild(t.$el)}Object.entries(a).forEach((function(t,e){if("object"==typeof t[1])!function t(e,i,s){e=null===e?a[i]:e[i],null!==e&&Object.entries(e).forEach((function(i,n){if("object"==typeof i[1])t(e,i[0],s+"-"+i[0]);else for(var o=v.querySelectorAll("[df-"+s+"-"+i[0]+"]"),a=0;a<o.length;a++)o[a].value=i[1],o[a].isContentEditable&&(o[a].innerText=i[1])}))}(null,t[0],t[0]);else for(var i=v.querySelectorAll("[df-"+t[0]+"]"),s=0;s<i.length;s++)i[s].value=t[1],i[s].isContentEditable&&(i[s].innerText=t[1])})),u.appendChild(h),u.appendChild(v),u.appendChild(p),u.style.top=n+"px",u.style.left=s+"px",c.appendChild(u),this.precanvas.appendChild(c);var b={id:d,name:t,data:a,class:o,html:r,typenode:l,inputs:g,outputs:f,pos_x:s,pos_y:n};return this.drawflow.drawflow[this.module].data[d]=b,this.dispatch("nodeCreated",d),this.useuuid||this.nodeId++,d}addNodeImport(t,e){const i=document.createElement("div");i.classList.add("parent-node");const s=document.createElement("div");s.innerHTML="",s.setAttribute("id","node-"+t.id),s.classList.add("drawflow-node"),""!=t.class&&s.classList.add(t.class);const n=document.createElement("div");n.classList.add("inputs");const o=document.createElement("div");o.classList.add("outputs"),Object.keys(t.inputs).map((function(i,s){const o=document.createElement("div");o.classList.add("input"),o.classList.add(i),n.appendChild(o),Object.keys(t.inputs[i].connections).map((function(s,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","path");a.classList.add("main-path"),a.setAttributeNS(null,"d",""),o.classList.add("connection"),o.classList.add("node_in_node-"+t.id),o.classList.add("node_out_node-"+t.inputs[i].connections[s].node),o.classList.add(t.inputs[i].connections[s].input),o.classList.add(i),o.appendChild(a),e.appendChild(o)}))}));for(var a=0;a<Object.keys(t.outputs).length;a++){const t=document.createElement("div");t.classList.add("output"),t.classList.add("output_"+(a+1)),o.appendChild(t)}const r=document.createElement("div");if(r.classList.add("drawflow_content_node"),!1===t.typenode)r.innerHTML=t.html;else if(!0===t.typenode)r.appendChild(this.noderegister[t.html].html.cloneNode(!0));else if(3===parseInt(this.render.version)){let e=this.render.h(this.noderegister[t.html].html,this.noderegister[t.html].props,this.noderegister[t.html].options);e.appContext=this.parent,this.render.render(e,r)}else{let e=new this.render({parent:this.parent,render:e=>e(this.noderegister[t.html].html,{props:this.noderegister[t.html].props}),...this.noderegister[t.html].options}).$mount();r.appendChild(e.$el)}Object.entries(t.data).forEach((function(e,i){if("object"==typeof e[1])!function e(i,s,n){i=null===i?t.data[s]:i[s],null!==i&&Object.entries(i).forEach((function(t,s){if("object"==typeof t[1])e(i,t[0],n+"-"+t[0]);else for(var o=r.querySelectorAll("[df-"+n+"-"+t[0]+"]"),a=0;a<o.length;a++)o[a].value=t[1],o[a].isContentEditable&&(o[a].innerText=t[1])}))}(null,e[0],e[0]);else for(var s=r.querySelectorAll("[df-"+e[0]+"]"),n=0;n<s.length;n++)s[n].value=e[1],s[n].isContentEditable&&(s[n].innerText=e[1])})),s.appendChild(n),s.appendChild(r),s.appendChild(o),s.style.top=t.pos_y+"px",s.style.left=t.pos_x+"px",i.appendChild(s),this.precanvas.appendChild(i)}addRerouteImport(t){const e=this.reroute_width,i=this.reroute_fix_curvature,s=this.container;Object.keys(t.outputs).map((function(n,o){Object.keys(t.outputs[n].connections).map((function(o,a){const r=t.outputs[n].connections[o].points;void 0!==r&&r.forEach((a,l)=>{const d=t.outputs[n].connections[o].node,c=t.outputs[n].connections[o].output,u=s.querySelector(".connection.node_in_node-"+d+".node_out_node-"+t.id+"."+n+"."+c);if(i&&0===l)for(var h=0;h<r.length;h++){var p=document.createElementNS("http://www.w3.org/2000/svg","path");p.classList.add("main-path"),p.setAttributeNS(null,"d",""),u.appendChild(p)}const g=document.createElementNS("http://www.w3.org/2000/svg","circle");g.classList.add("point");var m=a.pos_x,f=a.pos_y;g.setAttributeNS(null,"cx",m),g.setAttributeNS(null,"cy",f),g.setAttributeNS(null,"r",e),u.appendChild(g)})}))}))}updateNodeValue(t){for(var e=t.target.attributes,i=0;i<e.length;i++)if(e[i].nodeName.startsWith("df-")){for(var s=e[i].nodeName.slice(3).split("-"),n=this.drawflow.drawflow[this.module].data[t.target.closest(".drawflow_content_node").parentElement.id.slice(5)].data,o=0;o<s.length-1;o+=1)null==n[s[o]]&&(n[s[o]]={}),n=n[s[o]];n[s[s.length-1]]=t.target.value,t.target.isContentEditable&&(n[s[s.length-1]]=t.target.innerText),this.dispatch("nodeDataChanged",t.target.closest(".drawflow_content_node").parentElement.id.slice(5))}}updateNodeDataFromId(t,e){var i=this.getModuleFromNodeId(t);if(this.drawflow.drawflow[i].data[t].data=e,this.module===i){const i=this.container.querySelector("#node-"+t);Object.entries(e).forEach((function(t,s){if("object"==typeof t[1])!function t(s,n,o){s=null===s?e[n]:s[n],null!==s&&Object.entries(s).forEach((function(e,n){if("object"==typeof e[1])t(s,e[0],o+"-"+e[0]);else for(var a=i.querySelectorAll("[df-"+o+"-"+e[0]+"]"),r=0;r<a.length;r++)a[r].value=e[1],a[r].isContentEditable&&(a[r].innerText=e[1])}))}(null,t[0],t[0]);else for(var n=i.querySelectorAll("[df-"+t[0]+"]"),o=0;o<n.length;o++)n[o].value=t[1],n[o].isContentEditable&&(n[o].innerText=t[1])}))}}addNodeInput(t){var e=this.getModuleFromNodeId(t);const i=this.getNodeFromId(t),s=Object.keys(i.inputs).length;if(this.module===e){const e=document.createElement("div");e.classList.add("input"),e.classList.add("input_"+(s+1)),this.container.querySelector("#node-"+t+" .inputs").appendChild(e),this.updateConnectionNodes("node-"+t)}this.drawflow.drawflow[e].data[t].inputs["input_"+(s+1)]={connections:[]}}addNodeOutput(t){var e=this.getModuleFromNodeId(t);const i=this.getNodeFromId(t),s=Object.keys(i.outputs).length;if(this.module===e){const e=document.createElement("div");e.classList.add("output"),e.classList.add("output_"+(s+1)),this.container.querySelector("#node-"+t+" .outputs").appendChild(e),this.updateConnectionNodes("node-"+t)}this.drawflow.drawflow[e].data[t].outputs["output_"+(s+1)]={connections:[]}}removeNodeInput(t,e){var i=this.getModuleFromNodeId(t);const s=this.getNodeFromId(t);this.module===i&&this.container.querySelector("#node-"+t+" .inputs .input."+e).remove();const n=[];Object.keys(s.inputs[e].connections).map((function(i,o){const a=s.inputs[e].connections[o].node,r=s.inputs[e].connections[o].input;n.push({id_output:a,id:t,output_class:r,input_class:e})})),n.forEach((t,e)=>{this.removeSingleConnection(t.id_output,t.id,t.output_class,t.input_class)}),delete this.drawflow.drawflow[i].data[t].inputs[e];const o=[],a=this.drawflow.drawflow[i].data[t].inputs;Object.keys(a).map((function(t,e){o.push(a[t])})),this.drawflow.drawflow[i].data[t].inputs={};const r=e.slice(6);let l=[];o.forEach((e,s)=>{e.connections.forEach((t,e)=>{l.push(t)}),this.drawflow.drawflow[i].data[t].inputs["input_"+(s+1)]=e}),l=new Set(l.map(t=>JSON.stringify(t))),l=Array.from(l).map(t=>JSON.parse(t)),this.module===i&&this.container.querySelectorAll("#node-"+t+" .inputs .input").forEach((t,e)=>{const i=t.classList[1].slice(6);parseInt(r)<parseInt(i)&&(t.classList.remove("input_"+i),t.classList.add("input_"+(i-1)))}),l.forEach((e,s)=>{this.drawflow.drawflow[i].data[e.node].outputs[e.input].connections.forEach((s,n)=>{if(s.node==t){const o=s.output.slice(6);if(parseInt(r)<parseInt(o)){if(this.module===i){const i=this.container.querySelector(".connection.node_in_node-"+t+".node_out_node-"+e.node+"."+e.input+".input_"+o);i.classList.remove("input_"+o),i.classList.add("input_"+(o-1))}s.points?this.drawflow.drawflow[i].data[e.node].outputs[e.input].connections[n]={node:s.node,output:"input_"+(o-1),points:s.points}:this.drawflow.drawflow[i].data[e.node].outputs[e.input].connections[n]={node:s.node,output:"input_"+(o-1)}}}})}),this.updateConnectionNodes("node-"+t)}removeNodeOutput(t,e){var i=this.getModuleFromNodeId(t);const s=this.getNodeFromId(t);this.module===i&&this.container.querySelector("#node-"+t+" .outputs .output."+e).remove();const n=[];Object.keys(s.outputs[e].connections).map((function(i,o){const a=s.outputs[e].connections[o].node,r=s.outputs[e].connections[o].output;n.push({id:t,id_input:a,output_class:e,input_class:r})})),n.forEach((t,e)=>{this.removeSingleConnection(t.id,t.id_input,t.output_class,t.input_class)}),delete this.drawflow.drawflow[i].data[t].outputs[e];const o=[],a=this.drawflow.drawflow[i].data[t].outputs;Object.keys(a).map((function(t,e){o.push(a[t])})),this.drawflow.drawflow[i].data[t].outputs={};const r=e.slice(7);let l=[];o.forEach((e,s)=>{e.connections.forEach((t,e)=>{l.push({node:t.node,output:t.output})}),this.drawflow.drawflow[i].data[t].outputs["output_"+(s+1)]=e}),l=new Set(l.map(t=>JSON.stringify(t))),l=Array.from(l).map(t=>JSON.parse(t)),this.module===i&&this.container.querySelectorAll("#node-"+t+" .outputs .output").forEach((t,e)=>{const i=t.classList[1].slice(7);parseInt(r)<parseInt(i)&&(t.classList.remove("output_"+i),t.classList.add("output_"+(i-1)))}),l.forEach((e,s)=>{this.drawflow.drawflow[i].data[e.node].inputs[e.output].connections.forEach((s,n)=>{if(s.node==t){const o=s.input.slice(7);if(parseInt(r)<parseInt(o)){if(this.module===i){const i=this.container.querySelector(".connection.node_in_node-"+e.node+".node_out_node-"+t+".output_"+o+"."+e.output);i.classList.remove("output_"+o),i.classList.remove(e.output),i.classList.add("output_"+(o-1)),i.classList.add(e.output)}s.points?this.drawflow.drawflow[i].data[e.node].inputs[e.output].connections[n]={node:s.node,input:"output_"+(o-1),points:s.points}:this.drawflow.drawflow[i].data[e.node].inputs[e.output].connections[n]={node:s.node,input:"output_"+(o-1)}}}})}),this.updateConnectionNodes("node-"+t)}removeNodeId(t){this.removeConnectionNodeId(t);var e=this.getModuleFromNodeId(t.slice(5));this.module===e&&this.container.querySelector("#"+t).remove(),delete this.drawflow.drawflow[e].data[t.slice(5)],this.dispatch("nodeRemoved",t.slice(5))}removeConnection(){if(null!=this.connection_selected){var t=this.connection_selected.parentElement.classList;this.connection_selected.parentElement.remove();var e=this.drawflow.drawflow[this.module].data[t[2].slice(14)].outputs[t[3]].connections.findIndex((function(e,i){return e.node===t[1].slice(13)&&e.output===t[4]}));this.drawflow.drawflow[this.module].data[t[2].slice(14)].outputs[t[3]].connections.splice(e,1);var i=this.drawflow.drawflow[this.module].data[t[1].slice(13)].inputs[t[4]].connections.findIndex((function(e,i){return e.node===t[2].slice(14)&&e.input===t[3]}));this.drawflow.drawflow[this.module].data[t[1].slice(13)].inputs[t[4]].connections.splice(i,1),this.dispatch("connectionRemoved",{output_id:t[2].slice(14),input_id:t[1].slice(13),output_class:t[3],input_class:t[4]}),this.connection_selected=null}}removeSingleConnection(t,e,i,s){var n=this.getModuleFromNodeId(t);if(n===this.getModuleFromNodeId(e)){if(this.drawflow.drawflow[n].data[t].outputs[i].connections.findIndex((function(t,i){return t.node==e&&t.output===s}))>-1){this.module===n&&this.container.querySelector(".connection.node_in_node-"+e+".node_out_node-"+t+"."+i+"."+s).remove();var o=this.drawflow.drawflow[n].data[t].outputs[i].connections.findIndex((function(t,i){return t.node==e&&t.output===s}));this.drawflow.drawflow[n].data[t].outputs[i].connections.splice(o,1);var a=this.drawflow.drawflow[n].data[e].inputs[s].connections.findIndex((function(e,s){return e.node==t&&e.input===i}));return this.drawflow.drawflow[n].data[e].inputs[s].connections.splice(a,1),this.dispatch("connectionRemoved",{output_id:t,input_id:e,output_class:i,input_class:s}),!0}return!1}return!1}removeConnectionNodeId(t){const e="node_in_"+t,i="node_out_"+t,s=this.container.querySelectorAll("."+i);for(var n=s.length-1;n>=0;n--){var o=s[n].classList,a=this.drawflow.drawflow[this.module].data[o[1].slice(13)].inputs[o[4]].connections.findIndex((function(t,e){return t.node===o[2].slice(14)&&t.input===o[3]}));this.drawflow.drawflow[this.module].data[o[1].slice(13)].inputs[o[4]].connections.splice(a,1);var r=this.drawflow.drawflow[this.module].data[o[2].slice(14)].outputs[o[3]].connections.findIndex((function(t,e){return t.node===o[1].slice(13)&&t.output===o[4]}));this.drawflow.drawflow[this.module].data[o[2].slice(14)].outputs[o[3]].connections.splice(r,1),s[n].remove(),this.dispatch("connectionRemoved",{output_id:o[2].slice(14),input_id:o[1].slice(13),output_class:o[3],input_class:o[4]})}const l=this.container.querySelectorAll("."+e);for(n=l.length-1;n>=0;n--)o=l[n].classList,r=this.drawflow.drawflow[this.module].data[o[2].slice(14)].outputs[o[3]].connections.findIndex((function(t,e){return t.node===o[1].slice(13)&&t.output===o[4]})),this.drawflow.drawflow[this.module].data[o[2].slice(14)].outputs[o[3]].connections.splice(r,1),a=this.drawflow.drawflow[this.module].data[o[1].slice(13)].inputs[o[4]].connections.findIndex((function(t,e){return t.node===o[2].slice(14)&&t.input===o[3]})),this.drawflow.drawflow[this.module].data[o[1].slice(13)].inputs[o[4]].connections.splice(a,1),l[n].remove(),this.dispatch("connectionRemoved",{output_id:o[2].slice(14),input_id:o[1].slice(13),output_class:o[3],input_class:o[4]})}getModuleFromNodeId(t){var e;const i=this.drawflow.drawflow;return Object.keys(i).map((function(s,n){Object.keys(i[s].data).map((function(i,n){i==t&&(e=s)}))})),e}addModule(t){this.drawflow.drawflow[t]={data:{}},this.dispatch("moduleCreated",t)}changeModule(t){this.dispatch("moduleChanged",t),this.module=t,this.precanvas.innerHTML="",this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_y=0,this.mouse_x=0,this.mouse_y=0,this.zoom=1,this.zoom_last_value=1,this.precanvas.style.transform="",this.import(this.drawflow,!1)}removeModule(t){this.module===t&&this.changeModule("Home"),delete this.drawflow.drawflow[t],this.dispatch("moduleRemoved",t)}clearModuleSelected(){this.precanvas.innerHTML="",this.drawflow.drawflow[this.module]={data:{}}}clear(){this.precanvas.innerHTML="",this.drawflow={drawflow:{Home:{data:{}}}}}export(){const t=JSON.parse(JSON.stringify(this.drawflow));return this.dispatch("export",t),t}import(t,e=!0){this.clear(),this.drawflow=JSON.parse(JSON.stringify(t)),this.load(),e&&this.dispatch("import","import")}on(t,e){return"function"!=typeof e?(console.error("The listener callback must be a function, the given type is "+typeof e),!1):"string"!=typeof t?(console.error("The event name must be a string, the given type is "+typeof t),!1):(void 0===this.events[t]&&(this.events[t]={listeners:[]}),void this.events[t].listeners.push(e))}removeListener(t,e){if(void 0===this.events[t])return!1;this.events[t].listeners=this.events[t].listeners.filter(t=>t.toString()!==e.toString())}dispatch(t,e){if(void 0===this.events[t])return!1;this.events[t].listeners.forEach(t=>{t(e)})}getUuid(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}}}]).default}))},"545e":function(t,e,i){"use strict";i("10d0")},"687e":function(t,e,i){"use strict";var s=i("7a23"),n={class:"col text-end me-3",style:{position:"absolute","z-index":"5"}},o={class:"bar-zoom h2 ml-3 mt-4 text-primary"},a=["id"];function r(t,e){var i=this,r=Object(s["resolveComponent"])("tag-settings");return Object(s["openBlock"])(),Object(s["createElementBlock"])(s["Fragment"],null,[Object(s["createElementVNode"])("div",n,[Object(s["createElementVNode"])("div",o,[Object(s["createElementVNode"])("i",{class:"fas fa-search-minus cursor-pointer",onClick:e[0]||(e[0]=function(t){return i.editor.zoom_out()})}),Object(s["createElementVNode"])("i",{class:"ml-2 fas fa-search cursor-pointer",onClick:e[1]||(e[1]=function(t){return i.editor.zoom_reset()})}),Object(s["createElementVNode"])("i",{class:"ml-2 fas fa-search-plus cursor-pointer",onClick:e[2]||(e[2]=function(t){return i.editor.zoom_in()})})])]),Object(s["createElementVNode"])("div",{ref:t.editorId,id:t.editorId,class:"drawflowContainer",onDrop:e[3]||(e[3]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.drop&&t.drop.apply(t,e)}),onDragover:e[4]||(e[4]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.allowDrop&&t.allowDrop.apply(t,e)})},null,40,a),Object(s["createVNode"])(r)],64)}var l=i("9ab4"),d={class:"title-box py-1 row px-1 block-details"},c={class:"col block-title text-start"},u={class:"fst-normal h-3"},h=Object(s["createTextVNode"])(),p=Object(s["createTextVNode"])(),g={key:0,class:"text-warning fas fa-exclamation-triangle"},m={class:"text-end expand-collapse"},f=Object(s["createElementVNode"])("i",{class:"text-white far fa-trash-alt mr-2"},null,-1),v=[f],b={class:"badge bg-secondary"},w=Object(s["createElementVNode"])("i",{class:"fas fa-sync"},null,-1),y=[w],_={key:0,class:"mt-2 fas fa-play"},O={key:1,class:"mt-2 fas fa-circle-notch fa-spin"},x=["href"],C=Object(s["createElementVNode"])("i",{class:"fas fa-info"},null,-1),T=[C];function k(t,e){var i=Object(s["resolveComponent"])("block-properties");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{class:Object(s["normalizeClass"])(["block-"+(t.blockType&&t.blockType.toLowerCase()),"editor-block"])},[Object(s["createElementVNode"])("div",d,[Object(s["createElementVNode"])("div",c,[Object(s["createElementVNode"])("span",u,[Object(s["createElementVNode"])("i",{class:Object(s["normalizeClass"])(t.logoClass)},null,2),Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(t.nodeName),1)]),h,Object(s["createElementVNode"])("small",null,"("+Object(s["toDisplayString"])(t.uid)+")",1),p,t.blockOnError?(Object(s["openBlock"])(),Object(s["createElementBlock"])("i",g)):Object(s["createCommentVNode"])("",!0)]),Object(s["createElementVNode"])("div",m,[Object(s["createElementVNode"])("a",{onClick:e[0]||(e[0]=function(e){return t.deleteBlock()}),title:"Delete block"},v),Object(s["createElementVNode"])("a",{onClick:e[1]||(e[1]=function(e){return t.toggleSettings()}),title:"Toggle Settings",class:Object(s["normalizeClass"])(["fas text-decoration-none",t.detailsCollapsed?"fa-plus-square":"fa-minus-square"])},null,2)])]),Object(s["createElementVNode"])("div",{class:Object(s["normalizeClass"])(["text-end px-2 pb-2 block-tools",t.detailsCollapsed?"block-tools-collapsed":""])},[Object(s["createElementVNode"])("span",b,Object(s["toDisplayString"])(t.blockTypeDescription),1),t.latestVersion!==t.version?(Object(s["openBlock"])(),Object(s["createElementBlock"])("a",{key:0,onClick:e[2]||(e[2]=Object(s["withModifiers"])((function(e){return t.updateBlock()}),["stop"])),"data-tooltip":"Upgrade to block's latest version",class:"pt-2 top-1 ml-2"},y)):Object(s["createCommentVNode"])("",!0),18===t.blockTypeId?(Object(s["openBlock"])(),Object(s["createElementBlock"])("a",{key:1,onClick:e[3]||(e[3]=Object(s["withModifiers"])((function(e){return t.testBlock()}),["stop"])),"data-tooltip":"Test this block",class:"pt-2 top-1 ml-2"},[t.testingBlock?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("i",_)),t.testingBlock?(Object(s["openBlock"])(),Object(s["createElementBlock"])("i",O)):Object(s["createCommentVNode"])("",!0)])):Object(s["createCommentVNode"])("",!0),t.infoUrl?(Object(s["openBlock"])(),Object(s["createElementBlock"])("a",{key:2,href:t.infoUrl,"data-tooltip":"More info",target:"_blank",class:"ml-2 top-1"},T,8,x)):Object(s["createCommentVNode"])("",!0)],2),t.nuid?(Object(s["openBlock"])(),Object(s["createBlock"])(i,{key:"block-properties-"+t.nuid,refresh:t.refresh,nuid:t.nuid,blockType:t.blockType,blockTypeId:t.blockTypeId,show:t.showProperties,blockId:t.uid,type:t.type,uid:t.uid,ctx:t.context,botContext:t.botContext,parameters:t.parameters,authToken:t.authToken,onClose:e[4]||(e[4]=function(e){return t.toggleSettings(!1)})},null,8,["refresh","nuid","blockType","blockTypeId","show","blockId","type","uid","ctx","botContext","parameters","authToken"])):Object(s["createCommentVNode"])("",!0)],2)}var j={novalidate:""},E=["for"],N={key:0},S={key:0,class:"form-group mt-2"},$=["id"],L={key:1,class:"form-group mt-2"},B=["id"],I={key:2,class:"form-group mt-2"},D=["onUpdate:modelValue","id","placeholder"],M={value:null,disabled:"",class:"place-holder",key:"place_holder"},R=["value"],V=["value"],A={key:0,class:"fas fa-circle-notch fa-spin ml-2"},H=["onClick"],z=Object(s["createElementVNode"])("i",{class:"fas fa-sync-alt"},null,-1),P=[z],F=["onClick","href","data-tooltip"],q=Object(s["createElementVNode"])("i",{class:"fas fa-plus-square"},null,-1),W=[q],U=Object(s["createElementVNode"])("br",null,null,-1),X=["id"],J={key:3,class:"form-group mt-2"},K=["onUpdate:modelValue","name","id","aria-describedby"],G={key:4,class:"form-group mt-2"},Y=["onUpdate:modelValue","name","id","aria-describedby","placeholder"],Q=["id"],Z={key:5,class:"form-group mt-2"},tt=["onUpdate:modelValue","name","id","aria-describedby","placeholder"],et=["id"];function it(t,e){var i=Object(s["resolveComponent"])("TextProperty");return Object(s["openBlock"])(),Object(s["createBlock"])(s["Transition"],{name:"modal"},{default:Object(s["withCtx"])((function(){return[Object(s["createElementVNode"])("form",j,[Object(s["createElementVNode"])("div",null,[Object(s["createElementVNode"])("div",{class:Object(s["normalizeClass"])(["modal-mask p-2 b-top-1 block-properties","block-properties-"+(t.blockType&&t.blockType.toLowerCase())+" "+(t.show?"":"d-none")])},[(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(t.parameters,(function(n){return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{key:t.parameters.slug},[Object(s["createElementVNode"])("label",{for:t.form[n.slug],class:"text-left mt-1"},[Object(s["createTextVNode"])(Object(s["toDisplayString"])(n.name),1),n.mandatory?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",N,"*")):Object(s["createCommentVNode"])("",!0)],8,E),"STR"===n.type?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",S,[(Object(s["openBlock"])(),Object(s["createBlock"])(i,{key:n.slug+"-"+t.nuid+"-"+t.refresh,settings:t.tagifyStuff.tagifySettings,class:"form-control",mode:"input",blockId:t.blockId,name:n.slug+"-"+t.nuid,id:n.slug+"-"+t.nuid,value:t.form[n.slug],placeholder:n.placeholder,invalid:t.v$.form[n.slug]&&t.v$.form[n.slug].$invalid,onChange:t.change},null,8,["settings","blockId","name","id","value","placeholder","invalid","onChange"])),Object(s["createElementVNode"])("small",{id:n.name+"Help",class:"form-text text-muted"},Object(s["toDisplayString"])(n.description),9,$)])):Object(s["createCommentVNode"])("",!0),"TXT"===n.type?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",L,[(Object(s["openBlock"])(),Object(s["createBlock"])(i,{key:n.slug+"-"+t.nuid,settings:t.tagifyStuff.tagifySettings,mode:"textarea",blockId:t.blockId,name:n.slug+"-"+t.nuid,id:n.slug+"-"+t.nuid,value:t.form[n.slug],invalid:t.v$.form[n.slug]&&t.v$.form[n.slug].$invalid,onChange:t.change},null,8,["settings","blockId","name","id","value","invalid","onChange"])),Object(s["createElementVNode"])("small",{id:n.name+"Help",class:"form-text text-muted"},Object(s["toDisplayString"])(n.description),9,B)])):Object(s["createCommentVNode"])("",!0),"LIS"===n.type?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",I,[Object(s["withDirectives"])(Object(s["createElementVNode"])("select",{class:Object(s["normalizeClass"])(["select",(t.form[n.slug]&&""!==t.form[n.slug]?"":"place-holder")+" "+(t.v$.form&&t.v$.form[n.slug]&&t.v$.form[n.slug]&&t.v$.form[n.slug].$invalid?"form-field-error":"form-field-ok")+" "+(n.add_url&&null!==n.add_url&&""!==n.add_url?"w-75":"")]),"onUpdate:modelValue":function(e){return t.form[n.slug]=e},id:n.slug+"-"+t.blockId,onChange:e[0]||(e[0]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.change&&t.change.apply(t,e)}),placeholder:n.placeholder},[t.refreshingSelectOption&&!t.refreshedParameters[n.slug]||!t.form[n.slug]?(Object(s["openBlock"])(),Object(s["createElementBlock"])("option",M,Object(s["toDisplayString"])(t.refreshingSelectOption?"Loading...":n.placeholder),1)):Object(s["createCommentVNode"])("",!0),t.refreshedParameters[n.slug]?(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],{key:1},Object(s["renderList"])(t.refreshedParameters[n.slug].list_values,(function(t){return Object(s["openBlock"])(),Object(s["createElementBlock"])("option",{value:t.value,key:t.value},Object(s["toDisplayString"])(t.label),9,R)})),128)):Object(s["createCommentVNode"])("",!0),!t.refreshedParameters[n.slug]&&t.form[n.slug]?(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],{key:2},Object(s["renderList"])(n.list_values,(function(t){return Object(s["openBlock"])(),Object(s["createElementBlock"])("option",{value:t.value,key:t.value},Object(s["toDisplayString"])(t.label),9,V)})),128)):Object(s["createCommentVNode"])("",!0)],42,D),[[s["vModelSelect"],t.form[n.slug]]]),t.refreshingSelectOption?(Object(s["openBlock"])(),Object(s["createElementBlock"])("i",A)):Object(s["createCommentVNode"])("",!0),!t.refreshingSelectOption&&n.add_url&&""!==n.add_url?(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:1,onClick:Object(s["withModifiers"])((function(e){return t.authGuard(t.refreshList,t.authToken)(n.slug)}),["stop","prevent"]),class:"btn float-left p-0 ml-2","data-tooltip":"Refresh List"},P,8,H)):Object(s["createCommentVNode"])("",!0),n.add_url&&""!==n.add_url?(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:2,onClick:Object(s["withModifiers"])((function(e){return t.authGuard(t.addParameter,t.authToken)(t.formatUrl(n.add_url))}),["stop","prevent"]),href:t.formatUrl(n.add_url),class:"btn float-left p-0 ml-2","data-tooltip":"Add a new "+n.name},W,8,F)):Object(s["createCommentVNode"])("",!0),U,Object(s["createElementVNode"])("small",{id:n.slug+"Help",class:"form-text text-muted"},Object(s["toDisplayString"])(n.description),9,X)])):Object(s["createCommentVNode"])("",!0),"BOO"===n.type?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",J,[Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{onChange:e[1]||(e[1]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.change&&t.change.apply(t,e)}),ref_for:!0,ref:n.slug,"onUpdate:modelValue":function(e){return t.form[n.slug]=e},type:"checkbox",name:n.slug,id:n.slug+"-"+t.nuid,"aria-describedby":n.name},null,40,K),[[s["vModelCheckbox"],t.form[n.slug]]])])):Object(s["createCommentVNode"])("",!0),"DAT"===n.type?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",G,[Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{onInput:e[2]||(e[2]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.change&&t.change.apply(t,e)}),"onUpdate:modelValue":function(e){return t.form[n.slug]=e},type:"date",class:Object(s["normalizeClass"])(["form-control",t.v$.form[n.slug]&&t.v$.form[n.slug].$invalid?"form-field-error":"form-field-ok"]),name:n.slug,id:n.slug+"-"+t.nuid,"aria-describedby":n.name,placeholder:n.placeholder},null,42,Y),[[s["vModelText"],t.form[n.slug]]]),Object(s["createElementVNode"])("small",{id:n.name+"Help",class:"form-text text-muted"},Object(s["toDisplayString"])(n.description),9,Q)])):Object(s["createCommentVNode"])("",!0),"NUM"===n.type?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",Z,[Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{onInput:e[3]||(e[3]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.change&&t.change.apply(t,e)}),"onUpdate:modelValue":function(e){return t.form[n.slug]=e},type:"number",class:Object(s["normalizeClass"])(["form-control",t.v$.form[n.slug]&&t.v$.form[n.slug].$invalid?"form-field-error":"form-field-ok"]),name:n.slug,id:n.slug+"-"+t.nuid,"aria-describedby":n.name,placeholder:n.placeholder},null,42,tt),[[s["vModelText"],t.form[n.slug]]]),Object(s["createElementVNode"])("small",{id:n.name+"Help",class:"form-text text-muted"},Object(s["toDisplayString"])(n.description),9,et)])):Object(s["createCommentVNode"])("",!0)])})),128))],2)])])]})),_:1})}var st=i("94c2"),nt=["name","id"],ot=["name","id"];function at(t,e){return"textarea"===t.mode?(Object(s["openBlock"])(),Object(s["createElementBlock"])("textarea",{key:0,name:this.$props.name,id:this.$props.id,onChange:e[0]||(e[0]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.onChange&&t.onChange.apply(t,e)})},null,40,nt)):(Object(s["openBlock"])(),Object(s["createElementBlock"])("input",{key:1,name:this.$props.name,id:this.$props.id,class:"textPropertyInput",onChange:e[1]||(e[1]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.onChange&&t.onChange.apply(t,e)})},null,40,ot))}var rt=i("d26e"),lt=i.n(rt),dt=(i("3db7"),{class:"card-body"}),ct={class:"form-group"},ut=["for"],ht=["id","name"],pt={id:"decimalsInputHelp",class:"form-text text-muted"},gt={class:"mt-2"};function mt(t,e){var i=Object(s["resolveDirective"])("click-away");return t.show?Object(s["withDirectives"])((Object(s["openBlock"])(),Object(s["createElementBlock"])("div",{key:0,class:"tagSettings",style:Object(s["normalizeStyle"])([{"z-index":"999",position:"absolute"},"top: "+t.y+"px; left: "+t.x+"px"])},[Object(s["createElementVNode"])("div",dt,[Object(s["createElementVNode"])("form",null,[Object(s["createElementVNode"])("div",ct,[Object(s["createElementVNode"])("h6",null,Object(s["toDisplayString"])(t.tagData.value),1),Object(s["createElementVNode"])("label",{for:t.did},Object(s["toDisplayString"])(t.$t("tag_settings.decimals.title")),9,ut),Object(s["withDirectives"])(Object(s["createElementVNode"])("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.form[t.did]=e}),id:t.did,name:t.did,min:"0",class:Object(s["normalizeClass"])(["form-control",t.v$.form[t.did].$invalid?"form-field-error":"form-field-ok"])},null,10,ht),[[s["vModelText"],t.form[t.did]]]),Object(s["createElementVNode"])("small",pt,Object(s["toDisplayString"])(t.$t("tag_settings.decimals.subtitle")),1)])]),Object(s["createElementVNode"])("div",gt,[Object(s["createElementVNode"])("a",{href:"#",onClick:e[1]||(e[1]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.cancel&&t.cancel.apply(t,e)}),class:"card-link"},Object(s["toDisplayString"])(t.$t("global.actions.cancel")),1),Object(s["createElementVNode"])("a",{href:"#",onClick:e[2]||(e[2]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.save&&t.save.apply(t,e)}),class:"card-link"},Object(s["toDisplayString"])(t.$t("global.actions.save")),1)])])],4)),[[i,t.cancel]]):Object(s["createCommentVNode"])("",!0)}var ft=i("25a0"),vt=i("e3e1"),bt=Object(s["defineComponent"])({name:"TagSettings",props:{settings:Object,name:String},setup:function(){return{v$:Object(ft["a"])()}},data:function(){return{x:0,y:0,decimals:0,show:!1,blockId:"",id:"",did:"",form:{},validations:{},tagData:{},tagElement:{},tagType:String}},validations:function(){return this.validations},methods:{emitValue:function(){this.tagData["decimals"]=this.form[this.did],this.tagData["type"]=this.tagType,st["a"].emitter.emit("tag-property-settings-"+this.id,this.tagElement,this.tagData)},cancel:function(){this.show=!1},save:function(){this.v$.$touch(),this.v$.$error||(this.emitValue(),this.show=!1)}},created:function(){var t=this;st["a"].emitter.on("tag-property-settings",(function(e,i){var s={form:{}};t.x=i.x,t.y=i.y,t.id=i.id,t.blockId=e,t.show=!0,t.tagData=i.tag.data,t.tagElement=i.tag.tag,t.did="decimals-"+t.id+"-"+t.tagData.value,t.form[t.did]=i.tag.data.decimals||"",s["form"][t.did]={minValue:Object(vt["d"])(0),maxValue:Object(vt["b"])(100)},t.validations=s,t.tagType=i.tag.data.type}))}}),wt=(i("8bda"),i("6b0d")),yt=i.n(wt);const _t=yt()(bt,[["render",mt]]);var Ot=_t,xt=null,Ct=Object(s["defineComponent"])({name:"Tags",props:{mode:String,settings:Object,name:String,id:String,blockId:String,value:[String,Array],onChange:Function,invalid:Boolean},components:{TagSettings:Ot},data:function(){return{tagify:xt,modifiedValue:this.$props.value}},methods:{getTagIndexByValue:function(t,e){return t.filter((function(t){return t.value===e}))},getWhitelistItemByValue:function(t){var e=this.tagify.settings.whitelist.find((function(e){return e.value===t}));return e},escapeRegExp:function(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")},replaceAll:function(t,e,i){return t.replace(new RegExp(this.escapeRegExp(e),"g"),i)},formClass:function(){this.tagify.toggleClass("form-field-error")},removePatternFromString:function(t,e){return t.replace(e,"")}},watch:{invalid:function(){this.formClass()},value:{deep:!0,handler:function(t){this.modifiedValue=t}},settings:{deep:!0,immediate:!1,handler:function(t){var e;if(t&&t.whitelist&&this.tagify.settings&&JSON.stringify(t.whitelist)!==JSON.stringify(this.tagify.settings.whitelist)){for(var i=this.tagify.settings.whitelist.filter((function(e){return!t.whitelist.includes(e)})),s=0;s<i.length;s++)if(this.modifiedValue){e=this.tagify.getCleanValue();var n=this.getTagIndexByValue(e,i[s].value);if(n.length>0)for(var o=0;o<n.length;o++){var a=n[o],r=a.decimals?',"decimals":"'+a.decimals+'"':',"decimals":""';this.tagify.removeTags(i[s].value);var l='{"value":"'+a.value,d=this.modifiedValue.indexOf(l),c=a.type?',"type":"'+a.type+'"':"",u='[[{"value":"'+a.value+'","text":"'+a.text+'","title":"'+a.title+'"'+c+',"style":"'+a.style+'"'+r+',"prefix":"'+a.prefix+'"}]]';if(d>-1){var h="\\[\\["+l+".+?\\]\\]",p=new RegExp(h,"g");this.modifiedValue=this.removePatternFromString(this.modifiedValue,p)}st["a"].emitter.emit("block-properties-remove-tag-from-field-"+this.blockId,this.blockId,{id:this.id,value:u});var g='[[{"value":"'+a.value+'","text":"'+a.text+'","title":"'+a.title+'"'+c+',"style":"'+a.style+'","prefix":"'+a.prefix+'"}]]';this.modifiedValue=this.replaceAll(this.modifiedValue,g,"")}}this.tagify.settings.whitelist=t.whitelist,this.tagify.loadOriginalValues(this.modifiedValue)}}}},beforeUnmount:function(){this.tagify.destroy()},created:function(){var t=this;st["a"].emitter.on("tag-property-settings-"+this.id,(function(e,i){t.tagify.replaceTag(e,i)}))},mounted:function(){var t=this;this.settings.templates.tag=function(e){var i=t.getWhitelistItemByValue(e.value).type;try{return"<tag title='"+e.value+"' contenteditable='false' spellcheck=\"false\" class='tagify__tag "+(e.class?e.class:"")+"' "+t.tagify.getAttributes(e)+">\n                    <x title='remove tag' class='tagify__tag__removeBtn'></x>\n                    <div>\n                        <span class='tagify__tag-text'>"+e.value+"</span>\n                    </div>\n                    "+("NUM"===i?'<div><i role="button" class="fas fa-cog mt-1 tagSettingsBtn"></i></div>':"")+"\n                </tag>"}catch(s){console.error(s)}},this.tagify=new lt.a(this.$el,this.settings),this.tagify.on("click",(function(e){var i=t.getWhitelistItemByValue(e.detail.data.value).type;"NUM"===i&&st["a"].emitter.emit("tag-property-settings",t.blockId,{id:t.id,x:e.detail.originalEvent.clientX-120,y:e.detail.originalEvent.clientY+32,tag:e.detail})})),this.$props.invalid&&this.formClass(),this.value&&this.tagify.loadOriginalValues(this.value)}});i("41e3");const Tt=yt()(Ct,[["render",at]]);var kt=Tt,jt=i("f8d5"),Et=i("ac15"),Nt=i("bf25"),St={},$t=[null,void 0,""],Lt=Object(s["defineComponent"])({name:"BlockPropertiesComponent",props:{parameters:[],blockId:String,ctx:Object,show:Boolean,botContext:[],uid:Number,nuid:String,blockType:String,refresh:Number,authToken:String,blockTypeId:Number},setup:function(t,e){e.expose;var i=Object(s["reactive"])({value:"",tagifySettings:{autoComplete:{enabled:!0},duplicates:!0,tagTextProp:"value",pattern:"#",mode:"mix",enforceWhitelist:!0,mixMode:{insertAfterTag:" "},backspace:!0,editTags:!1,templates:{dropdownItem:n},transformTag:o,whitelist:[],dropdown:{enabled:0,maxItems:100,position:"text",mapValueTo:"value",highlightFirst:!0,placeAbove:!0}}});function n(t){return'<div class="tagify__dropdown__item">\n        <i class="fas fa-database"></i>\n        <span class="ml-2">'+t.value+"</span>\n      </div>"}function o(t){t.style="--tag-bg: #aee8be","NUM"!==t.type||t.decimals||(t.decimals="")}return{tagifyStuff:i,v$:Object(ft["a"])()}},created:function(){this.resetEventListeners(),this.tagifyStuff.tagifySettings.whitelist=[],this.context={},this.form={},this.validations={}},validations:function(){return this.validations},data:function(){return{context:St,form:{},validations:{},refreshingSelectOption:!1,refreshedParameters:{}}},components:{TextProperty:kt},watch:{botContext:{handler:function(t){t.length&&t.length>0?this.tagifyStuff.tagifySettings.whitelist=null===t||void 0===t?void 0:t.map((function(t){return"string"==typeof t?{value:t}:t})):this.tagifyStuff.tagifySettings.whitelist=[]}},parameters:{handler:function(t){var e=this;if(t&&0!==t.length){for(var i={form:{}},s=this.$props.parameters,n=0,o=s;n<o.length;n++){var a=o[n];a.mandatory&&"BOO"!==a.type&&(i["form"][a.slug]={required:vt["e"]}),"LIS"===a.type&&($t.includes(this.form[a.slug])&&(this.form[a.slug]=this.form[a.slug]||a.placeholder,a.add_url&&(this.form[a.slug]=null)),a.add_url&&this.authToken&&this.refreshList(a.slug)),st["a"].emitter.on("block-properties-remove-tag-from-field-"+this.$props.blockId,(function(t,i){e.removeTagValueFromField(i.id.substring(0,i.id.indexOf("-")),i.value)})),st["a"].emitter.emit("block-properties-change",this.$props.blockId,{field:a.slug,value:this.form[a.slug],error:!1,params:s,blockUuid:this.nuid,blockType:this.blockType})}this.validations=i,setTimeout(this.sendErrorStatus,400)}}},ctx:{handler:function(t){this.form=t}}},methods:{authGuard:Nt["a"],addParameter:function(t){var e=800,i=800,s=(screen.width-e)/2,n=(screen.height-i)/4;window.open(t,"windowName","popup=yes;toolbar=no,scrollbars=no,resizable=yes,top="+n+",left="+s+",width="+e+",height="+i)},formatUrl:function(t){var e=t.replaceAll("&amp;","&");return e+"&state=from_editor"},resetEventListeners:function(){st["a"].emitter.off("get-auth-token-response"),st["a"].emitter.off("block-properties-remove-tag-from-field-"+this.$props.blockId)},refreshList:function(t){return Object(l["b"])(this,void 0,void 0,(function(){var e,i;return Object(l["c"])(this,(function(s){switch(s.label){case 0:return this.refreshingSelectOption=!0,[4,this.refreshSelectOptions(t)];case 1:return e=s.sent(),i=this.getValuesFromParameterListBySlug(e[0].parameters,t),this.refreshedParameters[t]=i,this.refreshingSelectOption=!1,[2]}}))}))},refreshSelectOptions:function(t){return Object(l["b"])(this,void 0,void 0,(function(){var e,i;return Object(l["c"])(this,(function(s){switch(s.label){case 0:return e="https://api.boto.io/api/refresh_param",i={block_id:this.blockTypeId,param_slug:t},[4,jt["a"].request(e,this.authToken,Et["a"].POST,JSON.stringify(i))];case 1:return[2,s.sent()]}}))}))},getValuesFromParameterListBySlug:function(t,e){var i=t.find((function(t){return t.slug===e}));return i},removeTagValueFromField:function(t,e){var i="\\[\\["+e.substring(2,e.indexOf('",'))+".+?\\]\\]",s=new RegExp(i,"g");if(this.form[t]){var n=this.form[t].indexOf(e.substring(0,e.indexOf('",')));n>-1&&(this.form[t]=this.form[t].replace(s,""))}this.v$.$touch(),this.validateField(t,this.form[t])},validateField:function(t,e){st["a"].emitter.emit("block-properties-change",this.$props.blockId,{field:t,value:e,error:this.v$.$error,params:this.$props.parameters,blockUuid:this.nuid,blockType:this.blockType}),this.sendErrorStatus()},getTagMatchesForField:function(t){var e,i=/\[\[\{"value":"(.*?)","text":/gm,s=[];while(null!==(e=i.exec(t)))e.index===i.lastIndex&&i.lastIndex++,s.push({value:e[0],tag:e[1]});return s},updateField:function(t,e,i){e===this.blockId&&(this.form[t]=i,st["a"].emitter.emit("block-properties-change",this.$props.blockId,{field:t,value:i,error:this.v$.$error,params:this.$props.parameters,blockUuid:this.nuid,blockType:this.blockType}),st["a"].emitter.emit("block-properties-tag-removal",this.$props.blockId))},sendErrorStatus:function(){this.v$.$touch(),st["a"].emitter.emit("block-properties-error-"+this.nuid,this.blockId,this.v$.$error)},change:function(t){var e="",i="";t.target?(e="checkbox"===t.target.type?t.target.checked:t.target.value,i=t.target.id):(e=t.value,i=t.id),i=i.substring(0,i.indexOf("-")),this.form[i]=e,this.validateField(i,e)}}});i("545e");const Bt=yt()(Lt,[["render",it]]);var It=Bt,Dt=i("5502"),Mt=Object(s["defineComponent"])({name:"EditorBlockComponent",props:{id:Number,description:String,logo_class:String,nodeData:Object,nuid:String},components:{BlockProperties:It},computed:{blockTypeDescription:function(){var t="";switch(this.blockType){case"TRG":t="Trigger";break;case"OPR":t="Logic";break;case"LOG":t="Data";break;case"ACT":t="Action";break}return t}},data:function(){return{showProperties:!0,context:{},nodeName:"",infoUrl:"",logoClass:this.$props.logo_class,blockType:"",output_vars:[],parameters:[],botContext:{},blockOnError:!1,version:0,blockTypeId:"",uid:this.$props.nodeData?this.$props.nodeData.id:null,detailsCollapsed:!1,refresh:0,latestVersion:0,authToken:null,store:Object(Dt["e"])(),testingBlock:!1}},mounted:function(){var t=this;this.botContext={},this.context={};var e=this.id,i=this.nuid;this.resetEventListeners(),setTimeout((function(){st["a"].emitter.emit("editor-block-data-request",i,e)}),40),st["a"].emitter.on("editor-block-data-response-"+i,this.setCtx),st["a"].emitter.on("block-properties-error-"+i,this.setError),st["a"].emitter.on("editor-block-update-block-response-"+this.id,(function(e){t.blockType=e.block_type,t.parameters=e.parameters,t.output_vars=e.output_vars,t.infoUrl=e.info_url,t.version=e.version,t.logoClass=e.logo_class,t.nodeName=e.name,t.latestVersion=e.version,st["a"].emitter.emit("editor-block-update-block-updated",i,!0,e)}))},watch:{uid:{handler:function(t){st["a"].emitter.emit("editor-block-data-ctx-add",this.uid,this.output_vars),st["a"].emitter.on("editor-block-bot-context-update-"+t,this.setBotContext)}}},methods:{deleteBlock:function(){st["a"].emitter.emit("editor-block-delete",this.uid)},resetEventListeners:function(){st["a"].emitter.off("editor-block-data-response-"+this.uid),st["a"].emitter.off("editor-block-update-block-response-"+this.id),st["a"].emitter.off("block-properties-error-"+this.nuid)},filterCtx:function(t,e){for(var i=[],s=0;s<t.length;s++){var n=t[s].value;e.indexOf(n.substring(1,n.indexOf(".")))>-1&&i.push(t[s])}return i},setBotContext:function(t,e){this.botContext=this.filterCtx(t,e)},testBlock:function(){return Object(l["b"])(this,void 0,void 0,(function(){var t,e,i;return Object(l["c"])(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.testingBlock=!0,t={node_id:this.id,block_id:this.blockTypeId,block_data:this.context},[4,jt["a"].request("https://api.boto.io/api/block/test/",this.authToken,Et["a"].POST,JSON.stringify(t))];case 1:return e=s.sent(),st["a"].emitter.emit("emit-toast",1===e.status?"success":"error",e.message),this.testingBlock=!1,[3,3];case 2:return i=s.sent(),st["a"].emitter.emit("emit-toast","error",i),this.testingBlock=!1,[3,3];case 3:return[2]}}))}))},showToast:function(t,e){this.$toast.open({message:e,type:t,duration:5e3,dismissible:!0,position:"top-right"})},updateBlock:function(){this.refresh=1,st["a"].emitter.emit("editor-block-update-block",this.id,{nuid:this.nuid,blockTypeId:this.blockTypeId,uid:this.uid})},setCtx:function(t,e){if(t){for(var i in this.context={},t.data)this.context[i]=t.data[i];this.nodeName=t.nodeName,this.uid=t.id,this.infoUrl=t.info_url,this.blockType=t.block_type,this.parameters=t.parameters,this.output_vars=t.output_vars,this.blockTypeId=t.name,this.logoClass=t.logo_class,this.version=t.version,this.latestVersion=e,this.authToken=t.auth_token}},setError:function(t,e){t===this.uid&&(this.blockOnError=e),st["a"].emitter.emit("editor-block-error",t,e)},toggleSettings:function(t){this.showProperties=t||!this.showProperties,this.detailsCollapsed=!this.detailsCollapsed}}});i("05d4");const Rt=yt()(Mt,[["render",k]]);var Vt=Rt,At=i("52e1"),Ht=i.n(At),zt=i("ec26"),Pt=null,Ft=null,qt={},Wt=[],Ut=Object(s["defineComponent"])({name:"DrawFlowComponent",props:{authToken:String,blocks:Array,editorId:String,bot:Object,usesTemplate:Boolean,showZoom:Boolean},components:{EditorBlock:Vt,TagSettings:Ot},setup:function(){return{appVersion:i("d490").version}},data:function(){return{editor:null,mobile_item_selec:Pt,mobile_last_move:Ft,transform:"",isLoading:!1,fieldsContext:Wt,nodesStatuses:qt,validationStatus:!1,botId:null,activation:{show:!1,loading:!1},selectedNode:0}},mounted:function(){return Object(l["b"])(this,void 0,void 0,(function(){var t,e,i,s,n=this;return Object(l["c"])(this,(function(o){try{for(this.initDiagram(),this.initContext(),this.resetEventListeners(),this.bot&&Object.keys(this.bot).length>0&&(t=this.bot,e=null===t||void 0===t?void 0:t.json.data,this.initNodesStatuses(e),this.updateEditorBot(e,null===t||void 0===t?void 0:t.json.context.nodes)),i=document.getElementsByClassName("drag-drawflow"),s=0;s<i.length;s++)i[s].addEventListener("touchend",this.drop,!1),i[s].addEventListener("touchmove",this.positionMobile,!1),i[s].addEventListener("touchstart",this.drag,!1);st["a"].emitter.on("block-properties-change",(function(t,e){var i=n.editor.drawflow.drawflow.Home;i.data[t]&&i.context.nodes[e.blockUuid]&&(i.data[t].data[e.field]=e.value,i.data[t].parameters=e.params,i.context.nodes[e.blockUuid].parameters=e.params,i.context.nodes[e.blockUuid].block_type=e.blockType),n.validationStatusCheck()})),st["a"].emitter.on("editor-block-update-block",(function(t,e){var i=n.getBlockByTypeId(e.blockTypeId),s=n.editor.drawflow.drawflow.Home.data,o=i.id;i.id=t,n.editor.drawflow.drawflow.Home.context.nodes[e.nuid]=i,n.editor.drawflow.drawflow.Home.context.nodes[e.nuid].type=o,s[e.uid].block_type=i.block_type,s[e.uid].info_url=i.info_url,s[e.uid].logo_class=i.logo_class,s[e.uid].nodeName=i.name,s[e.uid].output_vars=i.output_vars,s[e.uid].parameters=i.parameters,s[t]=n.cleanOldKeys(s[e.uid]),n.updateAllFieldsContext(s),n.sendBotContext(s),n.checkBotScheduleType(),st["a"].emitter.emit("editor-block-update-block-response-"+t,i)})),st["a"].emitter.on("editor-block-data-request",(function(t){var e=n.editor.drawflow.drawflow["Home"],i=e.context.nodes[t];if(i&&e.data[i.id]){var s=i.id,o=n.getBlockByTypeId(i.type);e.data[s]["parameters"]=i.parameters,e.data[s]["nodeName"]=i.name,e.data[s]["info_url"]=i.info_url,e.data[s]["block_type"]=i.block_type,e.data[s]["version"]=i.version,e.data[s]["output_vars"]=i.output_vars,e.data[s]["logo_class"]=i.logo_class,e.data[s]["auth_token"]=n.authToken;var a=o&&o.version?o.version:0;st["a"].emitter.emit("editor-block-data-response-"+t,e.data[s],a)}})),st["a"].emitter.on("editor-block-data-ctx-add",(function(t,e){t&&n.updateFieldsContext(t,e)})),st["a"].emitter.on("editor-block-delete",(function(t){n.editor.removeNodeId("node-"+t)})),this.editor.on("connectionCreated",this.connectionCreated),this.editor.on("connectionRemoved",this.connectionRemoved),this.editor.on("nodeRemoved",this.removeNode),this.editor.on("beforeNodeRemoved",this.beforeRemoveNode),this.editor.on("nodeSelected",this.selectNode),this.editor.on("nodeUnselected",this.unselectNode),st["a"].emitter.on("editor-block-error",(function(t,e){var i=n.editor.drawflow.drawflow.Home.context.nodes,s=Object.keys(i).find((function(e){return i[e].id===t}));s&&(n.nodesStatuses[t]=e),n.validationStatusCheck()})),setTimeout((function(){n.refreshConnections()}),410)}catch(a){console.error(a)}return[2]}))}))},watch:{bot:{deep:!0,handler:function(t,e){if(e&&t&&t.id!==e.id||!e){var i=t,s=null===i||void 0===i?void 0:i.json.data;s&&this.updateEditorBot(s,null===i||void 0===i?void 0:i.json.context.nodes)}}}},methods:{connectionCreated:function(t){this.sendContext(t.input_id,t.output_id)},connectionRemoved:function(t){this.sendContext(t.input_id,t.output_id)},getBlockByTypeId:function(t){var e=this.blocks.map((function(t){return Object.assign({},t)})),i=e.find((function(e){return e.id===t}));return i},updateAllFieldsContext:function(t){for(var e in t)this.updateFieldsContext(e,t[e].output_vars)},updateFieldsContext:function(t,e){var i=function(i){var n=e[i],o="#"+t+"."+n.slug;s.fieldsContext.find((function(t){return t.value===o}))||s.fieldsContext.push({value:o,text:n.name,title:n.description,type:n.type})},s=this;for(var n in e)i(n)},cleanOldKeys:function(t){return["blockType","infoUrl"].forEach((function(e){delete t[e]})),t},resetEventListeners:function(){st["a"].emitter.off("editor-block-update-block"),st["a"].emitter.off("block-properties-error"),st["a"].emitter.off("block-properties-change"),st["a"].emitter.off("editor-block-data-request"),st["a"].emitter.off("editor-block-data-ctx-add"),st["a"].emitter.off("editor-block-delete"),st["a"].emitter.off("get-auth-token")},refreshConnections:function(){for(var t in this.editor.drawflow.drawflow.Home.data)this.editor.updateConnectionNodes("node-"+t)},initNodesStatuses:function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var s=i[e];this.nodesStatuses[s]=!1}},selectNode:function(t){this.selectedNode=t},unselectNode:function(){this.selectedNode=0},updateEditorBot:function(t,e){var i=this;setTimeout((function(){i.registerBlocks(t),i.editor.import({drawflow:{Home:{context:{nodes:e},data:t}}}),i.checkBotScheduleType(),setTimeout((function(){i.sendBotContext(t)}),160)}),10)},export:function(){var t=this.editor.export(),e=t.drawflow.Home,i={json:e};return i},registerBlocks:function(t){for(var e=0,i=Object.entries(t);e<i.length;e++){var s=i[e],n=s[1];this.registerBlock(n,n.html)}},registerBlock:function(t,e){t["nuid"]=e;var i=t,s={uid:e,parameters:t.parameters};this.editor.registerNode(e,Vt,i,s)},positionMobile:function(t){this.mobile_last_move=t},allowDrop:function(t){t.preventDefault()},drag:function(t){"touchstart"===t.type?this.mobile_item_selec=t.target.closest(".drag-drawflow").getAttribute("data-node"):t.dataTransfer.setData("node",t.target.getAttribute("data-node"))},drop:function(t){var e=t.dataTransfer.getData("node"),i=t.dataTransfer.getData("data"),s=JSON.parse(i);if("touchend"===t.type){var n=this.mobile_last_move.touches[0].clientX,o=this.mobile_last_move.touches[0].clientY,a=document.elementFromPoint(n,o),r=a.closest("#"+this.$props.editorId);null!=r&&this.addNodeToDrawFlow(this.mobile_item_selec,JSON.parse(this.mobile_item_selec),n,o),this.mobile_item_selec=""}else t.preventDefault(),this.addNodeToDrawFlow(e,s,t.clientX,t.clientY);this.checkBotScheduleType()},checkBotScheduleType:function(){var t=this.areThereTriggersInBot(),e=t?"ADH":"SCH";st["a"].emitter.emit("editor-trigger-type",e)},areThereTriggersInBot:function(){var t=this.editor.drawflow.drawflow.Home.context.nodes,e=Object.keys(this.editor.drawflow.drawflow.Home.data),i=Object.keys(t).find((function(i){return"TRG"===t[i].block_type&&e.indexOf(String(t[i].id))>-1}));return Boolean(i)},clearBot:function(){this.editor.clear(),this.editor.noderegister={},this.fieldsContext=[],this.editor.nodeId=1,this.initContext()},emitValidStatus:function(t){setTimeout((function(){st["a"].emitter.emit("editor-valid-status",t)}),160)},validationStatusCheck:function(){for(var t=0,e=Object.entries(this.nodesStatuses);t<e.length;t++){var i=e[t],s=i[1];if(s)return this.validationStatus=!1,void this.emitValidStatus(!1)}this.validationStatus=!0,this.emitValidStatus(!0)},getPreviousNodes:function(t,e){var i=this.editor.drawflow.drawflow["Home"].data,s=i[t].inputs,n=[];for(var o in e&&(n=e),s)for(var a=s[o],r=0;r<a.connections.length;r++){var l=a.connections;n.push(l[r].node),this.getPreviousNodes(l[r].node,n)}return Array.from(new Set(n))},getForwardNodes:function(t,e){var i=this.editor.drawflow.drawflow["Home"].data,s=i[t].outputs,n=[];for(var o in e&&(n=e),s)for(var a=s[o],r=0;r<a.connections.length;r++){var l=a.connections;l[r].node!==t&&(n.push(l[r].node),this.getForwardNodes(l[r].node,n))}return Array.from(new Set(n))},initContext:function(){this.fieldsContext=[],this.editor&&this.editor.clear(),this.editor.drawflow.drawflow["Home"].context={},this.editor.drawflow.drawflow["Home"].context.nodes={},this.editor.drawflow.drawflow["Home"].context.appVersion=this.appVersion},initDiagram:function(){var t,e=document.getElementById(this.$props.editorId);if(e){var i=null===e||void 0===e?void 0:e.className;e.className="",e.classList.add("parent-drawflow"),i.split(" ").forEach((function(t){return e.classList.add(t)}))}this.editor=null,this.editor=new Ht.a(e,s),this.editor.draggable_inputs=!1,this.editor.reroute=!0,this.editor.reroute_width=3,this.editor.removeNodeId=function(t){var e=t.slice(5),i="Home",s=this.drawflow.drawflow[i].data[e];s&&this.dispatch("beforeNodeRemoved",s),this.removeConnectionNodeId(t),this.module===i&&this.container.querySelector("#"+t).remove(),this.dispatch("nodeRemoved",t.slice(5)),delete this.drawflow.drawflow[i].data[e]},null===(t=this.editor)||void 0===t||t.start()},addNodeToDrawFlow:function(t,e,i,s){if("fixed"===this.editor.editor_mode)return!1;i=i*(this.editor.precanvas.clientWidth/(this.editor.precanvas.clientWidth*this.editor.zoom))-this.editor.precanvas.getBoundingClientRect().x*(this.editor.precanvas.clientWidth/(this.editor.precanvas.clientWidth*this.editor.zoom)),s=s*(this.editor.precanvas.clientHeight/(this.editor.precanvas.clientHeight*this.editor.zoom))-this.editor.precanvas.getBoundingClientRect().y*(this.editor.precanvas.clientHeight/(this.editor.precanvas.clientHeight*this.editor.zoom));var n=e.id,o=Object(zt["a"])();this.registerBlock(e,o);var a=this.editor.addNode(n,e.inputs,e.outputs,i,s,"class",{},o,"vue");this.editor.drawflow.drawflow["Home"].context.nodes[o]={type:n,id:a,parameters:e.parameters,info_url:e.info_url,block_type:e.block_type,logo_class:e.logo_class,name:e.name,version:e.version,output_vars:e.output_vars}},sendBotContext:function(t){for(var e in t){var i=t[e].id,s=this.getPreviousNodes(parseInt(i));this.updateBlockContext(i,s)}},updateBlockContext:function(t,e){st["a"].emitter.emit("editor-block-bot-context-update-"+t,this.fieldsContext,e)},areThereTagsFromNodeInNodes:function(t,e){for(var i=this.editor.drawflow.drawflow["Home"].data,s=(i[t].outputs,0);s<e.length;s++)for(var n=0,o=Object.entries(i);n<o.length;n++)for(var a=o[n],r=(a[0],a[1]),l=0,d=Object.entries(r.data);l<d.length;l++){var c=d[l],u=(c[0],c[1]),h=u;if(h.indexOf&&h.indexOf("#"+e[s]+"."))return!0}return!1},beforeRemoveNode:function(t){if(t.outputs.output_1&&t.inputs.input_1)for(var e=t.outputs.output_1.connections,i=t.inputs.input_1.connections,s=this.editor.drawflow.drawflow["Home"].data,n=this.getPreviousNodes(t.id),o=this.getForwardNodes(t.id),a=0,r=i;a<r.length;a++)for(var l=r[a],d=0,c=e;d<c.length;d++)for(var u=c[d],h=0,p=Object.entries(s[u.node].data);h<p.length;h++){for(var g=p[h],m=(g[0],g[1]),f=!1,v=0,b=n;v<b.length;v++){var w=b[v];if(m&&m.indexOf("#"+w+".")>-1||this.areThereTagsFromNodeInNodes(w,o)){f=!0;break}}if(f){this.editor.addConnection(l.node,u.node,"output_1","input_1");break}}},removeNode:function(t){delete this.nodesStatuses[t],0===Object.keys(this.nodesStatuses).length&&(this.validationStatus=!0);for(var e=this.editor.drawflow.drawflow["Home"].context.nodes,i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];String(e[n].id)===t&&delete e[n]}this.checkBotScheduleType(),this.validationStatusCheck()},areThereConnectionsToNodeFrom:function(t,e){for(var i=this.editor.drawflow.drawflow["Home"].data,s=!1,n=0,o=Object.entries(i);n<o.length;n++){for(var a=o[n],r=(a[0],a[1]),l=r,d=0,c=Object.entries(l.outputs);d<c.length;d++)for(var u=c[d],h=(u[0],u[1]),p=h,g=0,m=p.connections;g<m.length;g++){var f=m[g];if(t===parseInt(f.node)){s=!0;break}}return s}},sendContext:function(t,e){var i=parseInt(t),s=this.getForwardNodes(i),n=this.getPreviousNodes(i),o=this.fieldsContext.filter((function(t){var e=t.value;return n.indexOf(e.substring(1,e.indexOf(".")))>-1}));st["a"].emitter.emit("editor-block-bot-context-update-"+i,o,n);for(var a=function(t){var e=r.getPreviousNodes(parseInt(s[t])),i=r.fieldsContext.filter((function(t){var i=t.value;return e.indexOf(i.substring(1,i.indexOf(".")))>-1}));st["a"].emitter.emit("editor-block-bot-context-update-"+s[t],i,e)},r=this,l=0;l<s.length;l++)a(l)}}});i("250d");const Xt=yt()(Ut,[["render",r]]);e["a"]=Xt},"7b62":function(t,e,i){},8872:function(t,e,i){},"8a14":function(t,e,i){"use strict";var s=i("7a23"),n=Object(s["defineComponent"])({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}});
/**
 * Vue 3 Loading Overlay 0.0.0
 * (c) 2020
 * @license MIT
 */const o=Object(s["createVNode"])("g",{fill:"none","fill-rule":"evenodd"},[Object(s["createVNode"])("g",{transform:"translate(1 1)","stroke-width":"2"},[Object(s["createVNode"])("circle",{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}),Object(s["createVNode"])("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[Object(s["createVNode"])("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"})])])],-1);function a(t,e,i,n,a,r){return Object(s["openBlock"])(),Object(s["createBlock"])("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,stroke:t.color},[o],8,["width","height","stroke"])}n.render=a,n.__file="src/loaders/Spinner.vue";var r=Object(s["defineComponent"])({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}});const l=Object(s["createVNode"])("circle",{cx:"15",cy:"15",r:"15"},[Object(s["createVNode"])("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),Object(s["createVNode"])("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1),d=Object(s["createVNode"])("circle",{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"},[Object(s["createVNode"])("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),Object(s["createVNode"])("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})],-1),c=Object(s["createVNode"])("circle",{cx:"105",cy:"15",r:"15"},[Object(s["createVNode"])("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),Object(s["createVNode"])("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})],-1);function u(t,e,i,n,o,a){return Object(s["openBlock"])(),Object(s["createBlock"])("svg",{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:t.color,width:t.width,height:t.height},[l,d,c],8,["fill","width","height"])}r.render=u,r.__file="src/loaders/Dots.vue";var h=Object(s["defineComponent"])({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}});const p=Object(s["createVNode"])("rect",{x:"0",y:"13",width:"4",height:"5"},[Object(s["createVNode"])("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),Object(s["createVNode"])("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})],-1),g=Object(s["createVNode"])("rect",{x:"10",y:"13",width:"4",height:"5"},[Object(s["createVNode"])("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),Object(s["createVNode"])("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"})],-1),m=Object(s["createVNode"])("rect",{x:"20",y:"13",width:"4",height:"5"},[Object(s["createVNode"])("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),Object(s["createVNode"])("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"})],-1);function f(t,e,i,n,o,a){return Object(s["openBlock"])(),Object(s["createBlock"])("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:t.height,width:t.width,fill:t.color},[p,g,m],8,["height","width","fill"])}h.render=f,h.__file="src/loaders/Bars.vue";var v={Spinner:n,Dots:r,Bars:h},b=Object(s["defineComponent"])({name:"vue-loading",props:{active:Boolean,programmatic:Boolean,container:[Object,Function,HTMLElement],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:()=>{}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:{type:Number,default:100},loader:{type:String,default:"spinner"}},setup(t,e){const i=Object(s["ref"])(t.active),n=Object(s["computed"])(()=>{let e={background:t.backgroundColor,opacity:t.opacity,backdropFilter:`blur(${t.blur})`};return e}),o=()=>{t.programmatic&&(i.value=!1,setTimeout(()=>{},150))},a=()=>{t.canCancel&&i.value&&(o(),t.onCancel())},r=t=>{27===t.keyCode&&a()},l=()=>{t.isFullPage&&t.lockScroll&&document.body.classList.add("vld-shown")},d=()=>{t.isFullPage&&t.lockScroll&&document.body.classList.remove("vld-shown")};return Object(s["onMounted"])(()=>{t.programmatic&&(i.value=!0,document.addEventListener("keyup",r))}),Object(s["onUnmounted"])(()=>{document.removeEventListener("keyup",r)}),Object(s["watch"])(()=>t.active,()=>{i.value=t.active}),Object(s["watch"])(i,()=>{i.value?l():d()}),{isActive:i,bgStyle:n,hide:o,cancel:a}},components:v});const w={class:"vld-icon"};function y(t,e,i,n,o,a){return Object(s["openBlock"])(),Object(s["createBlock"])(s["Transition"],{ref:"root",name:t.transition},{default:Object(s["withCtx"])(()=>[Object(s["withDirectives"])(Object(s["createVNode"])("div",{tabindex:"0",class:["vld-overlay is-active",{"is-full-page":t.isFullPage}],"aria-busy":t.isActive,"aria-label":"Loading",style:{zIndex:t.zIndex}},[Object(s["createVNode"])("div",{class:"vld-background",onClick:e[1]||(e[1]=Object(s["withModifiers"])((...e)=>t.cancel&&t.cancel(...e),["prevent"])),style:t.bgStyle},null,4),Object(s["createVNode"])("div",w,[Object(s["renderSlot"])(t.$slots,"before"),Object(s["renderSlot"])(t.$slots,"default",{},()=>[(Object(s["openBlock"])(),Object(s["createBlock"])(Object(s["resolveDynamicComponent"])(t.loader),{color:t.color,width:t.width,height:t.height},null,8,["color","width","height"]))]),Object(s["renderSlot"])(t.$slots,"after")])],14,["aria-busy"]),[[s["vShow"],t.isActive]])]),_:3},8,["name"])}b.render=y,b.__file="src/main/Component.vue",e["a"]=b},"8afd":function(t,e,i){"use strict";i.d(e,"g",(function(){return n}));var s=i("7a23");i.d(e,"a",(function(){return s["computed"]})),i.d(e,"b",(function(){return s["getCurrentInstance"]})),i.d(e,"c",(function(){return s["inject"]})),i.d(e,"d",(function(){return s["isReactive"]})),i.d(e,"e",(function(){return s["isReadonly"]})),i.d(e,"f",(function(){return s["isRef"]})),i.d(e,"h",(function(){return s["nextTick"]})),i.d(e,"i",(function(){return s["onBeforeMount"]})),i.d(e,"j",(function(){return s["onBeforeUnmount"]})),i.d(e,"k",(function(){return s["provide"]})),i.d(e,"l",(function(){return s["reactive"]})),i.d(e,"m",(function(){return s["ref"]})),i.d(e,"n",(function(){return s["unref"]})),i.d(e,"o",(function(){return s["watch"]}));var n=!0},"8bda":function(t,e,i){"use strict";i("7b62")},"8fba":function(t,e,i){"use strict";var s=i("7a23"),n={class:"modal__title"},o={class:"modal__content"},a={class:"modal__action"},r=["onClick"],l=["onClick","disabled"],d={key:0,class:"fas fa-circle-notch fa-spin"};function c(t,e){var i=Object(s["resolveComponent"])("vue-final-modal");return Object(s["openBlock"])(),Object(s["createBlock"])(i,Object(s["mergeProps"])(t.$attrs,{classes:"modal-container text-center","content-class":"modal-content modal-content-"+t.$attrs.modalSize}),{default:Object(s["withCtx"])((function(e){var i=e.params,c=e.close;return[Object(s["createElementVNode"])("span",n,[Object(s["renderSlot"])(t.$slots,"title")]),Object(s["createElementVNode"])("div",o,[Object(s["renderSlot"])(t.$slots,"default",{params:i})]),Object(s["createElementVNode"])("div",a,[t.$attrs.hideCancel?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:0,onClick:function(e){return t.$emit("cancel",c)},class:"boto-button secondary-btn large"},Object(s["toDisplayString"])(t.$attrs.cancelText),9,r)),t.$attrs.hideConfirm?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("button",{key:1,onClick:function(e){return t.$emit("confirm",c)},class:Object(s["normalizeClass"])(["boto-button primary-btn large ml-2",t.$attrs.confirmEnabled?"primary-btn":"btn-secondary"]),disabled:!t.$attrs.confirmEnabled},[Object(s["createTextVNode"])(Object(s["toDisplayString"])(t.$attrs.confirmText)+" ",1),t.$attrs.loading?(Object(s["openBlock"])(),Object(s["createElementBlock"])("i",d)):Object(s["createCommentVNode"])("",!0)],10,l))])]})),_:3},16,["content-class"])}var u=Object(s["defineComponent"])({name:"BotoModal",inheritAttrs:!0,emits:["confirm","cancel"]}),h=(i("eb6e"),i("6b0d")),p=i.n(h);const g=p()(u,[["render",c]]);e["a"]=g},"9dfc":function(t,e,i){},ac15:function(t,e,i){"use strict";var s;i.d(e,"a",(function(){return s})),function(t){t["GET"]="get",t["POST"]="post",t["PUT"]="put",t["DELETE"]="delete"}(s||(s={}))},b9cd:function(t,e,i){},d26e:function(t,e,i){!function(e,i){t.exports=i()}(0,(function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function e(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?t(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const s=(t,e,i,s)=>(t=""+t,e=""+e,s&&(t=t.trim(),e=e.trim()),i?t==e:t.toLowerCase()==e.toLowerCase());function n(t,e){var i,s={};for(i in t)e.indexOf(i)<0&&(s[i]=t[i]);return s}function o(t){var e=document.createElement("div");return t.replace(/\&#?[0-9a-z]+;/gi,(function(t){return e.innerHTML=t,e.innerText}))}function a(t,e){for(e=e||"previous";t=t[e+"Sibling"];)if(3==t.nodeType)return t}function r(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):t}function l(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1);return t===Object(t)&&"Array"!=e&&"Function"!=e&&"RegExp"!=e&&"HTMLUnknownElement"!=e}function d(t,e,i){function s(t,e){for(var i in e)if(e.hasOwnProperty(i)){if(l(e[i])){l(t[i])?s(t[i],e[i]):t[i]=Object.assign({},e[i]);continue}if(Array.isArray(e[i])){t[i]=Object.assign([],e[i]);continue}t[i]=e[i]}}return t instanceof Object||(t={}),s(t,e),i&&s(t,i),t}function c(t){return String.prototype.normalize?"string"==typeof t?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:t}var u=()=>/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent);function h(t){return t&&t.classList&&t.classList.contains(this.settings.classNames.tag)}var p={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,keepInvalidTags:!1,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:()=>{},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:" "},autoComplete:{enabled:!0,rightKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tag:"tagify__tag",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",inputInvalid:"tagify__input--invalid",tagX:"tagify__tag__removeBtn",tagText:"tagify__tag-text",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownInital:"tagify__dropdown--initial",scopeLoading:"tagify--loading",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,highlightFirst:!1,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:()=>Promise.resolve(),beforePaste:()=>Promise.resolve(),suggestionClick:()=>Promise.resolve()}};function g(){this.dropdown={};for(let t in this._dropdown)this.dropdown[t]="function"==typeof this._dropdown[t]?this._dropdown[t].bind(this):this._dropdown[t];this.settings.dropdown.enabled>=0&&this.dropdown.init()}var m={init(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector(this.settings.classNames.dropdownWrapperSelector)},show(t){var e,i,n,o=this.settings,a="mix"==o.mode&&!o.enforceWhitelist,r=!o.whitelist||!o.whitelist.length,d="manual"==o.dropdown.position;if(t=void 0===t?this.state.inputText:t,(!r||a||o.templates.dropdownItemNoMatch)&&!1!==o.dropdown.enable&&!this.state.isLoading){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(t),t&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",t),o.templates.dropdownItemNoMatch&&(n=o.templates.dropdownItemNoMatch.call(this,{value:t}))),!n){if(this.suggestedListItems.length)t&&a&&!this.state.editing.scope&&!s(this.suggestedListItems[0].value,t)&&this.suggestedListItems.unshift({value:t});else{if(!t||!a||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:t}]}i=""+(l(e=this.suggestedListItems[0])?e.value:e),o.autoComplete&&i&&0==i.indexOf(t)&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(n),o.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.children[0]),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=t||!0,this.state.dropdown.query=t,this.setStateSelection(),d||setTimeout(()=>{this.dropdown.position(),this.dropdown.render()}),setTimeout(()=>{this.trigger("dropdown:show",this.DOM.dropdown)})}},hide(t){var e=this.DOM,i=e.scope,s=e.dropdown,n="manual"==this.settings.dropdown.position&&!t;if(s&&document.body.contains(s)&&!n)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),i.setAttribute("aria-expanded",!1),s.parentNode.removeChild(s),setTimeout(()=>{this.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",s),this},toggle(t){this.dropdown[this.state.dropdown.visible&&!t?"hide":"show"]()},render(){var t,e,i,s=(t=this.DOM.dropdown,(i=t.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(i),e=i.clientHeight,i.parentNode.removeChild(i),e),n=this.settings;return this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(n.classNames.dropdownInital),this.dropdown.position(s),n.dropdown.appendTarget.appendChild(this.DOM.dropdown),setTimeout(()=>this.DOM.dropdown.classList.remove(n.classNames.dropdownInital))),this},fill(t){var e;t="string"==typeof t?t:this.dropdown.createListHTML(t||this.suggestedListItems),this.DOM.dropdown.content.innerHTML=(e=t)?e.replace(/\>[\r\n ]+\</g,"><").replace(/(<.*?>)|\s+/g,(t,e)=>e||" "):""},refilter(t){t=t||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(t),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},position(t){var e=this.settings.dropdown;if("manual"!=e.position){var i,s,n,o,a,r,l=this.DOM.dropdown,d=e.placeAbove,c=document.documentElement.clientHeight,u=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)>480?e.position:"all",h=this.DOM["input"==u?"input":"scope"];t=t||l.clientHeight,this.state.dropdown.visible&&("text"==u?(n=(i=this.getCaretGlobalPosition()).bottom,s=i.top,o=i.left,a="auto"):(r=function(t){for(var e=0,i=0;t;)e+=t.offsetLeft||0,i+=t.offsetTop||0,t=t.parentNode;return{left:e,top:i}}(this.settings.dropdown.appendTarget),s=(i=h.getBoundingClientRect()).top-r.top,n=i.bottom-1-r.top,o=i.left-r.left,a=i.width+"px"),s=Math.floor(s),n=Math.ceil(n),d=void 0===d?c-i.bottom<t:d,l.style.cssText="left:"+(o+window.pageXOffset)+"px; width:"+a+";"+(d?"top: "+(s+window.pageYOffset)+"px":"top: "+(n+window.pageYOffset)+"px"),l.setAttribute("placement",d?"top":"bottom"),l.setAttribute("position",u))}},events:{binding(t=!0){var e=this.dropdown.events.callbacks,i=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},s=t?"addEventListener":"removeEventListener";"manual"!=this.settings.dropdown.position&&(window[s]("resize",i.position),window[s]("keydown",i.onKeyDown)),this.DOM.dropdown[s]("mouseover",i.onMouseOver),this.DOM.dropdown[s]("mouseleave",i.onMouseLeave),this.DOM.dropdown[s]("mousedown",i.onClick),this.DOM.dropdown.content[s]("scroll",i.onScroll)},callbacks:{onKeyDown(t){var e=this.DOM.dropdown.querySelector(this.settings.classNames.dropdownItemActiveSelector),i=this.dropdown.getSuggestionDataByNode(e);switch(t.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":var s;t.preventDefault(),e&&(e=e[("ArrowUp"==t.key||"Up"==t.key?"previous":"next")+"ElementSibling"]),e||(s=this.DOM.dropdown.content.children,e=s["ArrowUp"==t.key||"Up"==t.key?s.length-1:0]),i=this.dropdown.getSuggestionDataByNode(e),this.dropdown.highlightOption(e,!0);break;case"Escape":case"Esc":this.dropdown.hide();break;case"ArrowRight":if(this.state.actions.ArrowLeft)return;case"Tab":if("mix"!=this.settings.mode&&e&&!this.settings.autoComplete.rightKey&&!this.state.editing){t.preventDefault();var n=this.dropdown.getMappedValue(i);return this.input.autocomplete.set.call(this,n),!1}return!0;case"Enter":t.preventDefault(),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:i,suggestionElm:e}).then(()=>{if(e)return this.dropdown.selectOption(e);this.dropdown.hide(),"mix"!=this.settings.mode&&this.addTags(this.state.inputText.trim(),!0)}).catch(t=>t);break;case"Backspace":{if("mix"==this.settings.mode||this.state.editing.scope)return;const t=this.input.raw.call(this);""!=t&&8203!=t.charCodeAt(0)||(!0===this.settings.backspace?this.removeTags():"edit"==this.settings.backspace&&setTimeout(this.editTag.bind(this),0))}}},onMouseOver(t){var e=t.target.closest(this.settings.classNames.dropdownItemSelector);e&&this.dropdown.highlightOption(e)},onMouseLeave(t){this.dropdown.highlightOption()},onClick(t){if(0==t.button&&t.target!=this.DOM.dropdown&&t.target!=this.DOM.dropdown.content){var e=t.target.closest(this.settings.classNames.dropdownItemSelector),i=this.dropdown.getSuggestionDataByNode(e);this.state.actions.selectOption=!0,setTimeout(()=>this.state.actions.selectOption=!1,50),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:i,suggestionElm:e}).then(()=>{e?this.dropdown.selectOption(e):this.dropdown.hide()}).catch(t=>console.warn(t))}},onScroll(t){var e=t.target,i=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(i)})}}},getSuggestionDataByNode(t){var e=t?+t.getAttribute("tagifySuggestionIdx"):-1;return this.suggestedListItems[e]||null},highlightOption(t,e){var i,s=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(s),this.state.ddItemElm.removeAttribute("aria-selected")),!t)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);i=this.suggestedListItems[this.getNodeIndex(t)],this.state.ddItemData=i,this.state.ddItemElm=t,t.classList.add(s),t.setAttribute("aria-selected",!0),e&&(t.parentNode.scrollTop=t.clientHeight+t.offsetTop-t.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,i),this.dropdown.position())},selectOption(t){var e,i=this.settings.dropdown,s=i.clearOnSelect,n=i.closeOnSelect;if(!t)return e=this.addTags(this.state.inputText,!0),void(n&&this.dropdown.hide());var o=t.getAttribute("tagifySuggestionIdx"),a=this.suggestedListItems[+o];this.trigger("dropdown:select",{data:a,elm:t}),o&&a?(this.state.editing?this.onEditTagDone(null,d({__isValid:!0},this.normalizeTags(a)[0])):e=this["mix"==this.settings.mode?"addMixTags":"addTags"]([a],s),this.DOM.input.parentNode&&(setTimeout(()=>{this.DOM.input.focus(),this.toggleFocusClass(!0),this.placeCaretAfterNode(e)}),n?setTimeout(this.dropdown.hide.bind(this)):this.dropdown.refilter())):this.dropdown.hide()},selectAll(){return this.suggestedListItems.length=0,this.dropdown.hide(),this.addTags(this.dropdown.filterListItems(""),!0),this},filterListItems(t,e){var i,s,n,o,a,r=this.settings,d=r.dropdown,u=(e=e||{},t="select"==r.mode&&this.value.length&&this.value[0][r.tagTextProp]==t?"":t,[]),h=[],p=r.whitelist,g=d.maxItems||1/0,m=d.searchKeys,f=0;if(!t||!m.length)return(r.duplicates?p:p.filter(t=>!this.isTagDuplicate(l(t)?t.value:t))).slice(0,g);function v(t,e){return e.toLowerCase().split(" ").every(e=>t.includes(e.toLowerCase()))}for(a=d.caseSensitive?""+t:(""+t).toLowerCase();f<p.length;f++){let t,g;i=p[f]instanceof Object?p[f]:{value:p[f]};let b=Object.keys(i).some(t=>m.includes(t))?m:["value"];d.fuzzySearch&&!e.exact?(n=b.reduce((t,e)=>t+" "+(i[e]||""),"").toLowerCase().trim(),d.accentedSearch&&(n=c(n),a=c(a)),t=0==n.indexOf(a),g=n===a,s=v(n,a)):(t=!0,s=b.some(t=>{var s=""+(i[t]||"");return d.accentedSearch&&(s=c(s),a=c(a)),d.caseSensitive||(s=s.toLowerCase()),g=s===a,e.exact?s===a:0==s.indexOf(a)})),o=!r.duplicates&&this.isTagDuplicate(l(i)?i.value:i),s&&!o&&(g&&t?h.push(i):"startsWith"==d.sortby&&t?u.unshift(i):u.push(i))}return"function"==typeof d.sortby?d.sortby(h.concat(u),a):h.concat(u).slice(0,g)},getMappedValue(t){var e=this.settings.dropdown.mapValueTo;return e?"function"==typeof e?e(t):t[e]||t.value:t.value},createListHTML(t){return d([],t).map((t,e)=>{"string"!=typeof t&&"number"!=typeof t||(t={value:t});var i=this.dropdown.getMappedValue(t);t.value=i&&"string"==typeof i?r(i):i;var s=this.settings.templates.dropdownItem.apply(this,[t,this]);return s.replace(/\s*tagifySuggestionIdx=(["'])(.*?)\1/gim,"").replace(">",` tagifySuggestionIdx="${e}">`)}).join("")}};const f="@yaireo/tagify/";var v,b={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},w={wrapper:(t,e)=>`<tags class="${e.classNames.namespace} ${e.mode?""+e.classNames[e.mode+"Mode"]:""} ${t.className}"\n                    ${e.readonly?"readonly":""}\n                    ${e.disabled?"disabled":""}\n                    ${e.required?"required":""}\n                    tabIndex="-1">\n            <span ${!e.readonly&&e.userInput?"contenteditable":""} tabIndex="0" data-placeholder="${e.placeholder||"&#8203;"}" aria-placeholder="${e.placeholder||""}"\n                class="${e.classNames.input}"\n                role="textbox"\n                aria-autocomplete="both"\n                aria-multiline="${"mix"==e.mode}"></span>\n                &#8203;\n        </tags>`,tag(t,e){var i=this.settings;return`<tag title="${t.title||t.value}"\n                    contenteditable='false'\n                    spellcheck='false'\n                    tabIndex="${i.a11y.focusableTags?0:-1}"\n                    class="${i.classNames.tag} ${t.class||""}"\n                    ${this.getAttributes(t)}>\n            <x title='' class="${i.classNames.tagX}" role='button' aria-label='remove tag'></x>\n            <div>\n                <span class="${i.classNames.tagText}">${t[i.tagTextProp]||t.value}</span>\n            </div>\n        </tag>`},dropdown(t){var e=t.dropdown,i="manual"==e.position,s=""+t.classNames.dropdown;return`<div class="${i?"":s} ${e.classname}" role="listbox" aria-labelledby="dropdown">\n                    <div class="${t.classNames.dropdownWrapper}"></div>\n                </div>`},dropdownItem(t,e){return`<div ${this.getAttributes(t)}\n                    class='${this.settings.classNames.dropdownItem} ${t.class?t.class:""}'\n                    tabindex="0"\n                    role="option">${t.value}</div>`},dropdownItemNoMatch:null},y={customBinding(){this.customEventsList.forEach(t=>{this.on(t,this.settings.callbacks[t])})},binding(t=!0){var e,i=this.events.callbacks,s=t?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!t){for(var n in this.state.mainEvents=t,t&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),e=this.listeners.main=this.listeners.main||{focus:["input",i.onFocusBlur.bind(this)],keydown:["input",i.onKeydown.bind(this)],click:["scope",i.onClickScope.bind(this)],dblclick:["scope",i.onDoubleClickScope.bind(this)],paste:["input",i.onPaste.bind(this)],drop:["input",i.onDrop.bind(this)]})this.DOM[e[n][0]][s](n,e[n][1]);clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(i.observeOriginalInputValue.bind(this),500);var o=this.listeners.main.inputMutationObserver||new MutationObserver(i.onInputDOMChange.bind(this));o&&o.disconnect(),"mix"==this.settings.mode&&o.observe(this.DOM.input,{childList:!0})}},bindGlobal(t){var e,i=this.events.callbacks,s=t?"removeEventListener":"addEventListener";if(t||!this.listeners.global)for(e of(this.listeners.global=this.listeners&&this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:i[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:i.onWindowKeyDown.bind(this)},{type:"blur",target:this.DOM.input,cb:i.onFocusBlur.bind(this)}],this.listeners.global))e.target[s](e.type,e.cb)},unbindGlobal(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur(t){var e=t.target?this.trim(t.target.textContent):"",i=this.settings,s=t.type,n=i.dropdown.enabled>=0,o={relatedTarget:t.relatedTarget},a=this.state.actions.selectOption&&(n||!i.dropdown.closeOnSelect),r=this.state.actions.addNew&&n,l=t.relatedTarget&&h.call(this,t.relatedTarget)&&this.DOM.scope.contains(t.relatedTarget);if("blur"==s){if(t.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),this.triggerChangeEvent()}if(!a&&!r)if(this.state.hasFocus="focus"==s&&+new Date,this.toggleFocusClass(this.state.hasFocus),"mix"!=i.mode){if("focus"==s)return this.trigger("focus",o),void(0!==i.dropdown.enabled&&i.userInput||this.dropdown.show(this.value.length?"":void 0));"blur"==s&&(this.trigger("blur",o),this.loading(!1),"select"==this.settings.mode&&l&&(e=""),("select"==this.settings.mode&&e?!this.value.length||this.value[0].value!=e:e&&!this.state.actions.selectOption&&i.addTagOnBlur)&&this.addTags(e,!0),"select"!=this.settings.mode||e||this.removeTags()),this.DOM.input.removeAttribute("style"),this.dropdown.hide()}else"focus"==s?this.trigger("focus",o):"blur"==t.type&&(this.trigger("blur",o),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onWindowKeyDown(t){var e,i=document.activeElement;if(h.call(this,i)&&this.DOM.scope.contains(document.activeElement))switch(e=i.nextElementSibling,t.key){case"Backspace":this.removeTags(i),(e||this.DOM.input).focus();break;case"Enter":setTimeout(this.editTag.bind(this),0,i)}},onKeydown(t){var e=this.settings;"select"==e.mode&&e.enforceWhitelist&&this.value.length&&"Tab"!=t.key&&t.preventDefault();var i=this.trim(t.target.textContent);if(this.trigger("keydown",{originalEvent:this.cloneEvent(t)}),"mix"==e.mode){switch(t.key){case"Left":case"ArrowLeft":this.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(this.state.editing)return;var s,n,r,l=document.getSelection(),d="Delete"==t.key&&l.anchorOffset==(l.anchorNode.length||0),c=l.anchorNode.previousSibling,p=1==l.anchorNode.nodeType||!l.anchorOffset&&c&&1==c.nodeType&&l.anchorNode.previousSibling,g=o(this.DOM.input.innerHTML),m=this.getTagElms();if("edit"==e.backspace&&p)return s=1==l.anchorNode.nodeType?null:l.anchorNode.previousElementSibling,setTimeout(this.editTag.bind(this),0,s),void t.preventDefault();if(u()&&p)return r=a(p),p.hasAttribute("readonly")||p.remove(),this.DOM.input.focus(),void setTimeout(()=>{this.placeCaretAfterNode(r),this.DOM.input.click()});if("BR"==l.anchorNode.nodeName)return;if((d||p)&&1==l.anchorNode.nodeType?n=0==l.anchorOffset?d?m[0]:null:m[l.anchorOffset-1]:d?n=l.anchorNode.nextElementSibling:p&&(n=p),3==l.anchorNode.nodeType&&!l.anchorNode.nodeValue&&l.anchorNode.previousElementSibling&&t.preventDefault(),(p||d)&&!e.backspace)return void t.preventDefault();if("Range"!=l.type&&!l.anchorOffset&&l.anchorNode==this.DOM.input&&"Delete"!=t.key)return void t.preventDefault();if("Range"!=l.type&&n&&n.hasAttribute("readonly"))return void this.placeCaretAfterNode(a(n));clearTimeout(v),v=setTimeout(()=>{var t=document.getSelection(),e=o(this.DOM.input.innerHTML),i=!d&&t.anchorNode.previousSibling;if(e.length>=g.length&&i)if(h.call(this,i)&&!i.hasAttribute("readonly")){if(this.removeTags(i),this.fixFirefoxLastTagNoCaret(),2==this.DOM.input.children.length&&"BR"==this.DOM.input.children[1].tagName)return this.DOM.input.innerHTML="",this.value.length=0,!0}else i.remove();this.value=[].map.call(m,(t,e)=>{var i=this.tagData(t);if(t.parentNode||i.readonly)return i;this.trigger("remove",{tag:t,index:e,data:i})}).filter(t=>t)},20)}return!0}switch(t.key){case"Backspace":"select"==e.mode&&e.enforceWhitelist&&this.value.length?this.removeTags():this.state.dropdown.visible&&"manual"!=e.dropdown.position||""!=t.target.textContent&&8203!=i.charCodeAt(0)||(!0===e.backspace?this.removeTags():"edit"==e.backspace&&setTimeout(this.editTag.bind(this),0));break;case"Esc":case"Escape":if(this.state.dropdown.visible)return;t.target.blur();break;case"Down":case"ArrowDown":this.state.dropdown.visible||this.dropdown.show();break;case"ArrowRight":{let t=this.state.inputSuggestion||this.state.ddItemData;if(t&&e.autoComplete.rightKey)return void this.addTags([t],!0);break}case"Tab":{let s="select"==e.mode;if(!i||s)return!0;t.preventDefault()}case"Enter":if(this.state.dropdown.visible||229==t.keyCode)return;t.preventDefault(),setTimeout(()=>{this.state.actions.selectOption||this.addTags(i,!0)})}},onInput(t){if(this.postUpdate(),"mix"==this.settings.mode)return this.events.callbacks.onMixTagsInput.call(this,t);var e=this.input.normalize.call(this),i=e.length>=this.settings.dropdown.enabled,s={value:e,inputElm:this.DOM.input};s.isValid=this.validateTag({value:e}),this.state.inputText!=e&&(this.input.set.call(this,e,!1),-1!=e.search(this.settings.delimiters)?this.addTags(e)&&this.input.set.call(this):this.settings.dropdown.enabled>=0&&this.dropdown[i?"show":"hide"](e),this.trigger("input",s))},onMixTagsInput(t){var e,i,s,n,o,a,r,l,c=this.settings,h=this.value.length,p=this.getTagElms(),g=document.createDocumentFragment(),m=window.getSelection().getRangeAt(0),f=[].map.call(p,t=>this.tagData(t).value);if("deleteContentBackward"==t.inputType&&u()&&this.events.callbacks.onKeydown.call(this,{target:t.target,key:"Backspace"}),this.value.slice().forEach(t=>{t.readonly&&!f.includes(t.value)&&g.appendChild(this.createTagElem(t))}),g.childNodes.length&&(m.insertNode(g),this.setRangeAtStartEnd(!1,g.lastChild)),p.length!=h)return this.value=[].map.call(this.getTagElms(),t=>this.tagData(t)),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(a=window.getSelection()).rangeCount>0&&3==a.anchorNode.nodeType){if((m=a.getRangeAt(0).cloneRange()).collapse(!0),m.setStart(a.focusNode,0),s=(e=m.toString().slice(0,m.endOffset)).split(c.pattern).length-1,(i=e.match(c.pattern))&&(n=e.slice(e.lastIndexOf(i[i.length-1]))),n){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:n.match(c.pattern)[0],value:n.replace(c.pattern,"")},this.state.tag.baseOffset=a.baseOffset-this.state.tag.value.length,l=this.state.tag.value.match(c.delimiters))return this.state.tag.value=this.state.tag.value.replace(c.delimiters,""),this.state.tag.delimiters=l[0],this.addTags(this.state.tag.value,c.dropdown.clearOnSelect),void this.dropdown.hide();o=this.state.tag.value.length>=c.dropdown.enabled;try{r=(r=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&r.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch(t){}(r||s<this.state.mixMode.matchedPatternCount)&&(o=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=s}setTimeout(()=>{this.update({withoutChangeEvent:!0}),this.trigger("input",d({},this.state.tag,{textContent:this.DOM.input.textContent})),this.state.tag&&this.dropdown[o?"show":"hide"](this.state.tag.value)},10)},onInputIE(t){var e=this;setTimeout((function(){e.events.callbacks.onInput.call(e,t)}))},observeOriginalInputValue(){this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickScope(t){var e=this.settings,i=t.target.closest("."+e.classNames.tag),s=+new Date-this.state.hasFocus;if(t.target!=this.DOM.scope){if(!t.target.classList.contains(e.classNames.tagX))return i?(this.trigger("click",{tag:i,index:this.getNodeIndex(i),data:this.tagData(i),originalEvent:this.cloneEvent(t)}),void(1!==e.editTags&&1!==e.editTags.clicks||this.events.callbacks.onDoubleClickScope.call(this,t))):void(t.target==this.DOM.input&&("mix"==e.mode&&this.fixFirefoxLastTagNoCaret(),s>500)?this.state.dropdown.visible?this.dropdown.hide():0===e.dropdown.enabled&&"mix"!=e.mode&&this.dropdown.show(this.value.length?"":void 0):"select"==e.mode&&!this.state.dropdown.visible&&this.dropdown.show());this.removeTags(t.target.parentNode)}else this.state.hasFocus||this.DOM.input.focus()},onPaste(t){t.preventDefault();var e,i,s=this.settings;if("select"==s.mode&&s.enforceWhitelist||!s.userInput)return!1;s.readonly||(e=t.clipboardData||window.clipboardData,i=e.getData("Text"),s.hooks.beforePaste(t,{tagify:this,pastedText:i,clipboardData:e}).then(e=>{void 0===e&&(e=i),e&&(this.injectAtCaret(e,window.getSelection().getRangeAt(0)),"mix"==this.settings.mode?this.events.callbacks.onMixTagsInput.call(this,t):this.settings.pasteAsTags?this.addTags(this.state.inputText+e,!0):this.state.inputText=e)}).catch(t=>t))},onDrop(t){t.preventDefault()},onEditTagInput(t,e){var i=t.closest("."+this.settings.classNames.tag),s=this.getNodeIndex(i),n=this.tagData(i),o=this.input.normalize.call(this,t),a=i.innerHTML!=i.__tagifyTagData.__originalHTML,r=this.validateTag({[this.settings.tagTextProp]:o});a||!0!==t.originalIsValid||(r=!0),i.classList.toggle(this.settings.classNames.tagInvalid,!0!==r),n.__isValid=r,i.title=!0===r?n.title||n.value:r,o.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=o),this.dropdown.show(o)),this.trigger("edit:input",{tag:i,index:s,data:d({},this.value[s],{newValue:o}),originalEvent:this.cloneEvent(e)})},onEditTagFocus(t){this.state.editing={scope:t,input:t.querySelector("[contenteditable]")}},onEditTagBlur(t){if(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(t)){var e,i,s=this.settings,n=t.closest("."+s.classNames.tag),o=this.input.normalize.call(this,t),a=this.tagData(n).__originalData,r=n.innerHTML!=n.__tagifyTagData.__originalHTML,l=this.validateTag({[s.tagTextProp]:o});if(o)if(r){if(e=this.hasMaxTags(),i=this.getWhitelistItem(o)||d({},a,{[s.tagTextProp]:o,value:o,__isValid:l}),s.transformTag.call(this,i,a),!0!==(l=!e&&this.validateTag({[s.tagTextProp]:i[s.tagTextProp]}))){if(this.trigger("invalid",{data:i,tag:n,message:l}),s.editTags.keepInvalid)return;s.keepInvalidTags?i.__isValid=l:i=a}else s.keepInvalidTags&&(delete i.title,delete i["aria-invalid"],delete i.class);this.onEditTagDone(n,i)}else this.onEditTagDone(n,a);else this.onEditTagDone(n)}},onEditTagkeydown(t,e){switch(this.trigger("edit:keydown",{originalEvent:this.cloneEvent(t)}),t.key){case"Esc":case"Escape":e.innerHTML=e.__tagifyTagData.__originalHTML;case"Enter":case"Tab":t.preventDefault(),t.target.blur()}},onDoubleClickScope(t){var e,i,s=t.target.closest("."+this.settings.classNames.tag),n=this.settings;s&&n.userInput&&(e=s.classList.contains(this.settings.classNames.tagEditing),i=s.hasAttribute("readonly"),"select"==n.mode||n.readonly||e||i||!this.settings.editTags||this.editTag(s),this.toggleFocusClass(!0),this.trigger("dblclick",{tag:s,index:this.getNodeIndex(s),data:this.tagData(s)}))},onInputDOMChange(t){t.forEach(t=>{t.addedNodes.forEach(t=>{if(t)if("<div><br></div>"==t.outerHTML)t.replaceWith(document.createElement("br"));else if(1==t.nodeType&&t.querySelector(this.settings.classNames.tagSelector)){let e=document.createTextNode("");3==t.childNodes[0].nodeType&&"BR"!=t.previousSibling.nodeName&&(e=document.createTextNode("\n")),t.replaceWith(e,...[...t.childNodes].slice(0,-1)),this.placeCaretAfterNode(e.previousSibling)}else h.call(this,t)&&t.previousSibling&&"BR"==t.previousSibling.nodeName&&(t.previousSibling.replaceWith("\n​"),this.placeCaretAfterNode(t.previousSibling.previousSibling))}),t.removedNodes.forEach(t=>{t&&"BR"==t.nodeName&&h.call(this,e)&&(this.removeTags(e),this.fixFirefoxLastTagNoCaret())})});var e=this.DOM.input.lastChild;e&&""==e.nodeValue&&e.remove(),e&&"BR"==e.nodeName||this.DOM.input.appendChild(document.createElement("br"))}}};function _(t,e){return t?t.previousElementSibling&&t.previousElementSibling.classList.contains("tagify")?(console.warn("Tagify: ","input element is already Tagified",t),this):(d(this,function(t){var e=document.createTextNode("");function i(t,i,s){s&&i.split(/\s+/g).forEach(i=>e[t+"EventListener"].call(e,i,s))}return{off(t,e){return i("remove",t,e),this},on(t,e){return e&&"function"==typeof e&&i("add",t,e),this},trigger(i,s,n){var o;if(n=n||{cloneData:!0},i)if(t.settings.isJQueryPlugin)"remove"==i&&(i="removeTag"),jQuery(t.DOM.originalInput).triggerHandler(i,[s]);else{try{var a="object"==typeof s?s:{value:s};if((a=n.cloneData?d({},a):a).tagify=this,s instanceof Object)for(var r in s)s[r]instanceof HTMLElement&&(a[r]=s[r]);o=new CustomEvent(i,{detail:a})}catch(t){console.warn(t)}e.dispatchEvent(o)}}}}(this)),this.isFirefox="undefined"!=typeof InstallTrigger,this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(i=e.id,t=>{let e,s="/"+t;if(1==localStorage.getItem(f+i+"/v",1))try{e=JSON.parse(localStorage[f+i+s])}catch(t){}return e}),this.setPersistedData=(t=>t?(localStorage.setItem(f+t+"/v",1),(e,i)=>{let s="/"+i,n=JSON.stringify(e);e&&i&&(localStorage.setItem(f+t+s,n),dispatchEvent(new Event("storage")))}):()=>{})(e.id),this.clearPersistedData=(t=>e=>{const i=f+"/"+t+"/";if(e)localStorage.removeItem(i+e);else for(let t in localStorage)t.includes(i)&&localStorage.removeItem(t)})(e.id),this.applySettings(t,e),this.state={inputText:"",editing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(t),g.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),void(t.autofocus&&this.DOM.input.focus())):(console.warn("Tagify: ","input element not found",t),this);var i}return _.prototype={_dropdown:m,customEventsList:["change","add","remove","invalid","input","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim(t){return this.settings.trim&&t&&"string"==typeof t?t.trim():t},parseHTML:function(t){return(new DOMParser).parseFromString(t.trim(),"text/html").body.firstElementChild},templates:w,parseTemplate(t,e){return t=this.settings.templates[t]||t,this.parseHTML(t.apply(this,e))},set whitelist(t){const e=t&&Array.isArray(t);this.settings.whitelist=e?t:[],this.setPersistedData(e?t:[],"whitelist")},get whitelist(){return this.settings.whitelist},applySettings(t,i){p.templates=this.templates;var s=this.settings=d({},p,i);s.disabled=t.hasAttribute("disabled"),s.readonly=t.hasAttribute("readonly"),s.placeholder=t.getAttribute("placeholder")||s.placeholder||"",s.required=t.hasAttribute("required");for(let e in s.classNames)Object.defineProperty(s.classNames,e+"Selector",{get(){return"."+this[e].split(" ")[0]}});if(this.isIE&&(s.autoComplete=!1),["whitelist","blacklist"].forEach(e=>{var i=t.getAttribute("data-"+e);i&&(i=i.split(s.delimiters))instanceof Array&&(s[e]=i)}),"autoComplete"in i&&!l(i.autoComplete)&&(s.autoComplete=p.autoComplete,s.autoComplete.enabled=i.autoComplete),"mix"==s.mode&&(s.autoComplete.rightKey=!0,s.delimiters=i.delimiters||null,s.tagTextProp&&!s.dropdown.searchKeys.includes(s.tagTextProp)&&s.dropdown.searchKeys.push(s.tagTextProp)),t.pattern)try{s.pattern=new RegExp(t.pattern)}catch(t){}if(this.settings.delimiters)try{s.delimiters=new RegExp(this.settings.delimiters,"g")}catch(t){}s.disabled&&(s.userInput=!1),this.TEXTS=e(e({},b),s.texts||{}),"select"!=s.mode&&s.userInput||(s.dropdown.enabled=0),s.dropdown.appendTarget=i.dropdown&&i.dropdown.appendTarget?i.dropdown.appendTarget:document.body;let n=this.getPersistedData("whitelist");Array.isArray(n)&&(this.whitelist=Array.isArray(s.whitelist)?function(){const t=[],e={};for(let i of arguments)for(let s of i)l(s)?e[s.value]||(t.push(s),e[s.value]=1):t.includes(s)||t.push(s);return t}(s.whitelist,n):n)},getAttributes(t){var e,i=this.getCustomAttributes(t),s="";for(e in i)s+=" "+e+(void 0!==t[e]?`="${i[e]}"`:"");return s},getCustomAttributes(t){if(!l(t))return"";var e,i={};for(e in t)"__"!=e.slice(0,2)&&"class"!=e&&t.hasOwnProperty(e)&&void 0!==t[e]&&(i[e]=r(t[e]));return i},setStateSelection(){var t=window.getSelection(),e={anchorOffset:t.anchorOffset,anchorNode:t.anchorNode,range:t.getRangeAt&&t.rangeCount&&t.getRangeAt(0)};return this.state.selection=e,e},getCaretGlobalPosition(){const t=document.getSelection();if(t.rangeCount){const e=t.getRangeAt(0),i=e.startContainer,s=e.startOffset;let n,o;if(s>0)return o=document.createRange(),o.setStart(i,s-1),o.setEnd(i,s),n=o.getBoundingClientRect(),{left:n.right,top:n.top,bottom:n.bottom};if(i.getBoundingClientRect)return i.getBoundingClientRect()}return{left:-9999,top:-9999}},getCSSVars(){var t,e=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(({value:t,unit:e})=>"s"==e?1e3*t:t)(function(t){if(!t)return{};var e=(t=t.trim().split(" ")[0]).split(/\d+/g).filter(t=>t).pop().trim();return{value:+t.split(e).filter(t=>t)[0].trim(),unit:e}}((t="tag-hide-transition",e.getPropertyValue("--"+t))))}},build(t){var e=this.DOM;this.settings.mixMode.integrated?(e.originalInput=null,e.scope=t,e.input=t):(e.originalInput=t,e.scope=this.parseTemplate("wrapper",[t,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),t.parentNode.insertBefore(e.scope,t))},destroy(){this.events.unbindGlobal.call(this),this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.dropdown.hide(!0),clearTimeout(this.dropdownHide__bindEventsTimeout)},loadOriginalValues(t){var e,i=this.settings;if(void 0===t){const e=this.getPersistedData("value");t=e&&!this.DOM.originalInput.value?e:i.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags({withoutChangeEvent:!0}),t)if("mix"==i.mode)this.parseMixTags(t.trim()),(e=this.DOM.input.lastChild)&&"BR"==e.tagName||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{JSON.parse(t)instanceof Array&&(t=JSON.parse(t))}catch(t){}this.addTags(t).forEach(t=>t&&t.classList.add(i.classNames.tagNoAnimation))}else this.postUpdate();this.state.lastOriginalValueReported=i.mixMode.integrated?"":this.DOM.originalInput.value,this.state.loadedOriginalValues=!0},cloneEvent(t){var e={};for(var i in t)e[i]=t[i];return e},loading(t){return this.state.isLoading=t,this.DOM.scope.classList[t?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading(t,e){return t&&t.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass(t,e){"string"==typeof t&&this.DOM.scope.classList.toggle(t,e)},toggleFocusClass(t){this.toggleClass(this.settings.classNames.focus,!!t)},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var t=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==t.value,i=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=t.value,i.simulated=!0,t._valueTracker&&t._valueTracker.setValue(Math.random()),t.dispatchEvent(i),this.trigger("change",this.state.lastOriginalValueReported),t.value=this.state.lastOriginalValueReported)}},events:y,fixFirefoxLastTagNoCaret(){},placeCaretAfterNode(t){if(t&&t.parentNode){var e=t.nextSibling,i=window.getSelection(),s=i.getRangeAt(0);i.rangeCount&&(s.setStartAfter(e||t),s.collapse(!0),i.removeAllRanges(),i.addRange(s))}},insertAfterTag(t,e){if(e=e||this.settings.mixMode.insertAfterTag,t&&t.parentNode&&e)return e="string"==typeof e?document.createTextNode(e):e,t.parentNode.insertBefore(e,t.nextSibling),e},editTag(t,e){t=t||this.getLastTag(),e=e||{},this.dropdown.hide();var i=this.settings;function s(){return t.querySelector(i.classNames.tagTextSelector)}var n=s(),o=this.getNodeIndex(t),a=this.tagData(t),r=this.events.callbacks,l=this,c=!0;if(n){if(!(a instanceof Object&&"editable"in a)||a.editable)return n.setAttribute("contenteditable",!0),t.classList.add(i.classNames.tagEditing),this.tagData(t,{__originalData:d({},a),__originalHTML:t.innerHTML}),n.addEventListener("focus",r.onEditTagFocus.bind(this,t)),n.addEventListener("blur",(function(){setTimeout(()=>r.onEditTagBlur.call(l,s()))})),n.addEventListener("input",r.onEditTagInput.bind(this,n)),n.addEventListener("keydown",e=>r.onEditTagkeydown.call(this,e,t)),n.focus(),this.setRangeAtStartEnd(!1,n),e.skipValidation||(c=this.editTagToggleValidity(t)),n.originalIsValid=c,this.trigger("edit:start",{tag:t,index:o,data:a,isValid:c}),this}else console.warn("Cannot find element in Tag template: .",i.classNames.tagTextSelector)},editTagToggleValidity(t,e){var i;if(e=e||this.tagData(t))return(i=!("__isValid"in e)||!0===e.__isValid)||this.removeTagsFromValue(t),this.update(),t.classList.toggle(this.settings.classNames.tagNotAllowed,!i),e.__isValid;console.warn("tag has no data: ",t,e)},onEditTagDone(t,e){e=e||{};var i={tag:t=t||this.state.editing.scope,index:this.getNodeIndex(t),previousData:this.tagData(t),data:e};this.trigger("edit:beforeUpdate",i,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,t&&e[this.settings.tagTextProp]?(t=this.replaceTag(t,e),this.editTagToggleValidity(t,e),this.settings.a11y.focusableTags&&t.focus()):t&&this.removeTags(t),this.trigger("edit:updated",i),this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag(t,e){e&&e.value||(e=t.__tagifyTagData),e.__isValid&&1!=e.__isValid&&d(e,this.getInvalidTagAttrs(e,e.__isValid));var i=this.createTagElem(e);return t.parentNode.replaceChild(i,t),this.updateValueByDOMTags(),i},updateValueByDOMTags(){this.value.length=0,[].forEach.call(this.getTagElms(),t=>{t.classList.contains(this.settings.classNames.tagNotAllowed.split(" ")[0])||this.value.push(this.tagData(t))}),this.update()},setRangeAtStartEnd(t,e){t="number"==typeof t?t:!!t,e=(e=e||this.DOM.input).lastChild||e;var i=document.getSelection();try{i.rangeCount>=1&&["Start","End"].forEach(s=>i.getRangeAt(0)["set"+s](e,t||e.length))}catch(t){}},injectAtCaret(t,e){if(e=e||this.state.selection.range)return"string"==typeof t&&(t=document.createTextNode(t)),e.deleteContents(),e.insertNode(t),this.setRangeAtStartEnd(!1,t),this.updateValueByDOMTags(),this.update(),this},input:{set(t="",e=!0){var i=this.settings.dropdown.closeOnSelect;this.state.inputText=t,e&&(this.DOM.input.innerHTML=r(""+t)),!t&&i&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw(){return this.DOM.input.textContent},validate(){var t=!this.state.inputText||!0===this.validateTag({value:this.state.inputText});return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!t),t},normalize(t){var e=t||this.DOM.input,i=[];e.childNodes.forEach(t=>3==t.nodeType&&i.push(t.nodeValue)),i=i.join("\n");try{i=i.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch(t){}return i=i.replace(/\s/g," "),this.settings.trim&&(i=i.replace(/^\s+/,"")),i},autocomplete:{suggest(t){if(this.settings.autoComplete.enabled){"string"==typeof(t=t||{})&&(t={value:t});var e=t.value?""+t.value:"",i=e.substr(0,this.state.inputText.length).toLowerCase(),s=e.substring(this.state.inputText.length);e&&this.state.inputText&&i==this.state.inputText.toLowerCase()?(this.DOM.input.setAttribute("data-suggest",s),this.state.inputSuggestion=t):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}},set(t){var e=this.DOM.input.getAttribute("data-suggest"),i=t||(e?this.state.inputText+e:null);return!!i&&("mix"==this.settings.mode?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+i)):(this.input.set.call(this,i),this.setRangeAtStartEnd()),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx(t){return this.value.findIndex(e=>e.__tagId==(t||{}).__tagId)},getNodeIndex(t){var e=0;if(t)for(;t=t.previousElementSibling;)e++;return e},getTagElms(...t){var e="."+[...this.settings.classNames.tag.split(" "),...t].join(".");return[].slice.call(this.DOM.scope.querySelectorAll(e))},getLastTag(){var t=this.DOM.scope.querySelectorAll(`${this.settings.classNames.tagSelector}:not(.${this.settings.classNames.tagHide}):not([readonly])`);return t[t.length-1]},tagData:(t,e,i)=>t?(e&&(t.__tagifyTagData=i?e:d({},t.__tagifyTagData||{},e)),t.__tagifyTagData):(console.warn("tag elment doesn't exist",t,e),e),isTagDuplicate(t,e){var i=this.settings;return"select"!=i.mode&&this.value.reduce((n,o)=>s(this.trim(""+t),o.value,e||i.dropdown.caseSensitive)?n+1:n,0)},getTagIndexByValue(t){var e=[];return this.getTagElms().forEach((i,n)=>{s(this.trim(i.textContent),t,this.settings.dropdown.caseSensitive)&&e.push(n)}),e},getTagElmByValue(t){var e=this.getTagIndexByValue(t)[0];return this.getTagElms()[e]},flashTag(t){t&&(t.classList.add(this.settings.classNames.tagFlash),setTimeout(()=>{t.classList.remove(this.settings.classNames.tagFlash)},100))},isTagBlacklisted(t){return t=this.trim(t.toLowerCase()),this.settings.blacklist.filter(e=>(""+e).toLowerCase()==t).length},isTagWhitelisted(t){return!!this.getWhitelistItem(t)},getWhitelistItem(t,e,i){e=e||"value";var n,o=this.settings;return(i=i||o.whitelist).some(i=>{var a="string"==typeof i?i:i[e]||i.value;if(s(a,t,o.dropdown.caseSensitive,o.trim))return n="string"==typeof i?{value:i}:i,!0}),n||"value"!=e||"value"==o.tagTextProp||(n=this.getWhitelistItem(t,o.tagTextProp,i)),n},validateTag(t){var e=this.settings,i="value"in t?"value":e.tagTextProp,s=this.trim(t[i]+"");return(t[i]+"").trim()?e.pattern&&e.pattern instanceof RegExp&&!e.pattern.test(s)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(s,this.state.editing)?this.TEXTS.duplicate:this.isTagBlacklisted(s)||e.enforceWhitelist&&!this.isTagWhitelisted(s)?this.TEXTS.notAllowed:!e.validate||e.validate(t):this.TEXTS.empty},getInvalidTagAttrs(t,e){return{"aria-invalid":!0,class:`${t.class||""} ${this.settings.classNames.tagNotAllowed}`.trim(),title:e}},hasMaxTags(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly(t,e){var i=this.settings;document.activeElement.blur(),i[e||"readonly"]=t,this.DOM.scope[(t?"set":"remove")+"Attribute"](e||"readonly",!0),"mix"==i.mode&&this.setContentEditable(!t)},setContentEditable(t){!this.settings.readonly&&this.settings.userInput&&(this.DOM.input.contentEditable=t)},setDisabled(t){this.setReadonly(t,"disabled")},normalizeTags(t){var e=this.settings,i=e.whitelist,s=e.delimiters,n=e.mode,o=e.tagTextProp;e.enforceWhitelist;var a=[],r=!!i&&i[0]instanceof Object,l=t instanceof Array,d=t=>(t+"").split(s).filter(t=>t).map(t=>({[o]:this.trim(t),value:this.trim(t)}));if("number"==typeof t&&(t=t.toString()),"string"==typeof t){if(!t.trim())return[];t=d(t)}else l&&(t=[].concat(...t.map(t=>t.value?t:d(t))));return r&&(t.forEach(t=>{var e=a.map(t=>t.value),i=this.dropdown.filterListItems.call(this,t[o],{exact:!0});this.settings.duplicates||(i=i.filter(t=>!e.includes(t.value)));var s=i.length>1?this.getWhitelistItem(t[o],o,i):i[0];s&&s instanceof Object?a.push(s):"mix"!=n&&(null==t.value&&(t.value=t[o]),a.push(t))}),a.length&&(t=a)),t},parseMixTags(t){var e=this.settings,i=e.mixTagsInterpolator,s=e.duplicates,n=e.transformTag,o=e.enforceWhitelist,a=e.maxTags,r=e.tagTextProp,l=[];return t=t.split(i[0]).map((t,e)=>{var d,c,u,h=t.split(i[1]),p=h[0],g=l.length==a;try{if(p==+p)throw Error;c=JSON.parse(p)}catch(t){c=this.normalizeTags(p)[0]||{value:p}}if(n.call(this,c),g||!(h.length>1)||o&&!this.isTagWhitelisted(c.value)||!s&&this.isTagDuplicate(c.value)){if(t)return e?i[0]+t:t}else c[d=c[r]?r:"value"]=this.trim(c[d]),u=this.createTagElem(c),l.push(c),u.classList.add(this.settings.classNames.tagNoAnimation),h[0]=u.outerHTML,this.value.push(c);return h.join("")}).join(""),this.DOM.input.innerHTML=t,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize(),this.getTagElms().forEach((t,e)=>this.tagData(t,l[e])),this.update({withoutChangeEvent:!0}),t},replaceTextWithNode(t,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var i,s,n=window.getSelection(),o=n.anchorNode,a=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return o.splitText(n.anchorOffset-a),-1==(i=o.nodeValue.lastIndexOf(e))||(s=o.splitText(i),t&&o.parentNode.replaceChild(t,s)),!0}},selectTag(t,e){var i=this.settings;if(!i.enforceWhitelist||this.isTagWhitelisted(e.value)){this.input.set.call(this,e[i.tagTextProp]||e.value,!0),this.state.actions.selectOption&&setTimeout(this.setRangeAtStartEnd.bind(this));var s=this.getLastTag();return s?this.replaceTag(s,e):this.appendTag(t),i.enforceWhitelist&&this.setContentEditable(!1),this.value[0]=e,this.update(),this.trigger("add",{tag:t,data:e}),[t]}},addEmptyTag(t){var e=d({value:""},t||{}),i=this.createTagElem(e);this.tagData(i,e),this.appendTag(i),this.editTag(i,{skipValidation:!0})},addTags(t,e,i){var s=[],n=this.settings,o=document.createDocumentFragment();return i=i||n.skipInvalid,t&&0!=t.length?(t=this.normalizeTags(t),"mix"==n.mode?this.addMixTags(t):("select"==n.mode&&(e=!1),this.DOM.input.removeAttribute("style"),t.forEach(t=>{var e,a={},r=Object.assign({},t,{value:t.value+""});if(t=Object.assign({},r),n.transformTag.call(this,t),t.__isValid=this.hasMaxTags()||this.validateTag(t),!0!==t.__isValid){if(i)return;d(a,this.getInvalidTagAttrs(t,t.__isValid),{__preInvalidData:r}),t.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(t.value))}if("readonly"in t&&(t.readonly?a["aria-readonly"]=!0:delete t.readonly),e=this.createTagElem(t,a),s.push(e),"select"==n.mode)return this.selectTag(e,t);o.appendChild(e),t.__isValid&&!0===t.__isValid?(this.value.push(t),this.trigger("add",{tag:e,index:this.value.length-1,data:t})):(this.trigger("invalid",{data:t,index:this.value.length,tag:e,message:t.__isValid}),n.keepInvalidTags||setTimeout(()=>this.removeTags(e,!0),1e3)),this.dropdown.position()}),this.appendTag(o),this.update(),t.length&&e&&this.input.set.call(this),this.dropdown.refilter(),s)):("select"==n.mode&&this.removeAllTags(),s)},addMixTags(t){if((t=this.normalizeTags(t))[0].prefix||this.state.tag)return this.prefixedTextToTag(t[0]);"string"==typeof t&&(t=[{value:t}]);var e=!!this.state.selection,i=document.createDocumentFragment();return t.forEach(t=>{var e=this.createTagElem(t);i.appendChild(e),this.insertAfterTag(e)}),e?this.injectAtCaret(i):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(i),this.updateValueByDOMTags(),this.update()),i},prefixedTextToTag(t){var e,i=this.settings,s=this.state.tag.delimiters;if(i.transformTag.call(this,t),t.prefix=t.prefix||this.state.tag?this.state.tag.prefix:(i.pattern.source||i.pattern)[0],e=this.createTagElem(t),this.replaceTextWithNode(e)||this.DOM.input.appendChild(e),setTimeout(()=>e.classList.add(this.settings.classNames.tagNoAnimation),300),this.value.push(t),this.update(),!s){var n=this.insertAfterTag(e)||e;this.placeCaretAfterNode(n)}return this.state.tag=null,this.trigger("add",d({},{tag:e},{data:t})),e},appendTag(t){var e=this.DOM,i=e.scope.lastElementChild;i===e.input?e.scope.insertBefore(t,i):e.scope.appendChild(t)},createTagElem(t,i){t.__tagId=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16));var s,n=d({},t,e({value:r(t.value+"")},i));return function(t){for(var e,i=document.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);e=i.nextNode();)e.textContent.trim()||e.parentNode.removeChild(e)}(s=this.parseTemplate("tag",[n])),this.tagData(s,t),s},reCheckInvalidTags(){var t=this.settings;this.getTagElms(t.classNames.tagNotAllowed).forEach((t,e)=>{var i=this.tagData(t),s=this.hasMaxTags(),n=this.validateTag(i);if(!0===n&&!s)return i=i.__preInvalidData?i.__preInvalidData:{value:i.value},this.replaceTag(t,i);t.title=s||n})},removeTags(t,e,i){var s;t=t&&t instanceof HTMLElement?[t]:t instanceof Array?t:t?[t]:[this.getLastTag()],s=t.reduce((t,e)=>{e&&"string"==typeof e&&(e=this.getTagElmByValue(e));var i=this.tagData(e);return e&&i&&!i.readonly&&t.push({node:e,idx:this.getTagIdx(i),data:this.tagData(e,{__removed:!0})}),t},[]),i="number"==typeof i?i:this.CSSVars.tagHideTransition,"select"==this.settings.mode&&(i=0,this.input.set.call(this)),1==s.length&&s[0].node.classList.contains(this.settings.classNames.tagNotAllowed)&&(e=!0),s.length&&this.settings.hooks.beforeRemoveTag(s,{tagify:this}).then(()=>{function t(t){t.node.parentNode&&(t.node.parentNode.removeChild(t.node),e?this.settings.keepInvalidTags&&this.trigger("remove",{tag:t.node,index:t.idx}):(this.trigger("remove",{tag:t.node,index:t.idx,data:t.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()))}i&&i>10&&1==s.length?function(e){e.node.style.width=parseFloat(window.getComputedStyle(e.node).width)+"px",document.body.clientTop,e.node.classList.add(this.settings.classNames.tagHide),setTimeout(t.bind(this),i,e)}.call(this,s[0]):s.forEach(t.bind(this)),e||(this.removeTagsFromValue(s.map(t=>t.node)),this.update(),"select"==this.settings.mode&&this.setContentEditable(!0))}).catch(t=>{})},removeTagsFromDOM(){[].slice.call(this.getTagElms()).forEach(t=>t.parentNode.removeChild(t))},removeTagsFromValue(t){(t=Array.isArray(t)?t:[t]).forEach(t=>{var e=this.tagData(t),i=this.getTagIdx(e);i>-1&&this.value.splice(i,1)})},removeAllTags(t){t=t||{},this.value=[],"mix"==this.settings.mode?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.position(),"select"==this.settings.mode&&(this.input.set.call(this),this.setContentEditable(!0)),this.update(t)},postUpdate(){var t=this.settings.classNames,e="mix"==this.settings.mode?this.settings.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(t.hasMaxTags,this.value.length>=this.settings.maxTags),this.toggleClass(t.hasNoTags,!this.value.length),this.toggleClass(t.empty,!e)},setOriginalInputValue(t){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=t,e.tagifyValue=e.value,this.setPersistedData(t,"value"))},update(t){var e=this.getInputValue();this.setOriginalInputValue(e),this.postUpdate(),!(t||{}).withoutChangeEvent&&this.state.loadedOriginalValues&&this.triggerChangeEvent()},getInputValue(){var t=this.getCleanValue();return"mix"==this.settings.mode?this.getMixedTagsAsString(t):t.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(t):JSON.stringify(t):""},getCleanValue(t){return e=t||this.value,i=this.dataProps,e&&Array.isArray(e)&&e.map(t=>n(t,i));var e,i},getMixedTagsAsString(){var t="",e=this,i=this.settings.mixTagsInterpolator;return function s(o){o.childNodes.forEach(o=>{if(1==o.nodeType){const a=e.tagData(o);if("BR"==o.tagName&&(t+="\r\n"),"DIV"==o.tagName||"P"==o.tagName)t+="\r\n",s(o);else if(h.call(e,o)&&a){if(a.__removed)return;t+=i[0]+JSON.stringify(n(a,e.dataProps))+i[1]}}else t+=o.textContent})}(this.DOM.input),t}},_.prototype.removeTag=_.prototype.removeTags,_}))},e3e1:function(t,e,i){"use strict";i.d(e,"a",(function(){return b})),i.d(e,"b",(function(){return j})),i.d(e,"c",(function(){return y})),i.d(e,"d",(function(){return T})),i.d(e,"e",(function(){return O}));var s=i("8afd");function n(t){return"function"===typeof t}function o(t){return null!==t&&"object"===typeof t&&!Array.isArray(t)}function a(t){return n(t.$validator)?Object.assign({},t):{$validator:t}}function r(t){return"object"===typeof t?t.$valid:t}function l(t){return t.$validator||t}function d(t,e){if(!o(t))throw new Error('[@vuelidate/validators]: First parameter to "withParams" should be an object, provided '+typeof t);if(!o(e)&&!n(e))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const i=a(e);return i.$params=Object.assign({},i.$params||{},t),i}function c(t,e){if(!n(t)&&"string"!==typeof Object(s["n"])(t))throw new Error('[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided '+typeof t);if(!o(e)&&!n(e))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const i=a(e);return i.$message=t,i}function u(t,e=[]){const i=a(t);return Object.assign({},i,{$async:!0,$watchTargets:e})}function h(t){return{$validator(e,...i){return Object(s["n"])(e).reduce((e,s)=>{const n=Object.entries(s).reduce((e,[n,o])=>{const a=t[n]||{},d=Object.entries(a).reduce((t,[e,a])=>{const d=l(a),c=d.call(this,o,s,...i),u=r(c);if(t.$data[e]=c,t.$data.$invalid=!u||!!t.$data.$invalid,t.$data.$error=t.$data.$invalid,!u){let i=a.$message||"";const s=a.$params||{};"function"===typeof i&&(i=i({$pending:!1,$invalid:!u,$params:s,$model:o,$response:c})),t.$errors.push({$property:n,$message:i,$params:s,$response:c,$model:o,$pending:!1,$validator:e})}return{$valid:t.$valid&&u,$data:t.$data,$errors:t.$errors}},{$valid:!0,$data:{},$errors:[]});return e.$data[n]=d.$data,e.$errors[n]=d.$errors,{$valid:e.$valid&&d.$valid,$data:e.$data,$errors:e.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:e.$valid&&n.$valid,$data:e.$data.concat(n.$data),$errors:e.$errors.concat(n.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:({$response:t})=>t?t.$errors.map(t=>Object.values(t).map(t=>t.map(t=>t.$message)).reduce((t,e)=>t.concat(e),[])):[]}}const p=t=>{if(t=Object(s["n"])(t),Array.isArray(t))return!!t.length;if(void 0===t||null===t)return!1;if(!1===t)return!0;if(t instanceof Date)return!isNaN(t.getTime());if("object"===typeof t){for(let e in t)return!0;return!1}return!!String(t).length},g=t=>(t=Object(s["n"])(t),Array.isArray(t)?t.length:"object"===typeof t?Object.keys(t).length:String(t).length);function m(t){return e=>(e=Object(s["n"])(e),!p(e)||t.test(e))}s["n"],m(/^[a-zA-Z]*$/),m(/^[a-zA-Z0-9]*$/),m(/^\d*(\.\d+)?$/);const f=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;m(f);function v(t){return e=>!p(e)||g(e)<=Object(s["n"])(t)}function b(t){return{$validator:v(t),$message:({$params:t})=>"The maximum length allowed is "+t.max,$params:{max:t,type:"maxLength"}}}function w(t){return e=>!p(e)||g(e)>=Object(s["n"])(t)}function y(t){return{$validator:w(t),$message:({$params:t})=>`This field should be at least ${t.min} long`,$params:{min:t,type:"minLength"}}}function _(t){return"string"===typeof t&&(t=t.trim()),p(t)}var O={$validator:_,$message:"Value is required",$params:{type:"required"}};const x=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;m(x);function C(t){return e=>!p(e)||(!/\s/.test(e)||e instanceof Date)&&+e>=+Object(s["n"])(t)}function T(t){return{$validator:C(t),$message:({$params:t})=>"The minimum value allowed is "+t.min,$params:{min:t,type:"minValue"}}}function k(t){return e=>!p(e)||(!/\s/.test(e)||e instanceof Date)&&+e<=+Object(s["n"])(t)}var j=t=>({$validator:k(t),$message:({$params:t})=>"The maximum value is "+t.max,$params:{max:t,type:"maxValue"}});m(/(^[0-9]*$)|(^-[0-9]+$)/),m(/^[-]?\d*(\.\d+)?$/)},eb6e:function(t,e,i){"use strict";i("8872")},f8d5:function(t,e,i){"use strict";var s=i("9ab4"),n=function(t,e,i,n,o){return Object(s["b"])(void 0,void 0,void 0,(function(){var a,r,l,d,c,u,h,p,g;return Object(s["c"])(this,(function(m){switch(m.label){case 0:return a=new AbortController,r=new Headers,o||r.append("Content-Type","application/json"),e&&r.append("Authorization","Token "+e),l={method:i,headers:r,cache:"no-store"},d=l.timeout,c=void 0===d?8e3:d,u=setTimeout((function(){return a.abort()}),c),n&&(l["body"]=n),console.log({url:t,authToken:e,type:i,body:n,form:o}),[4,fetch(t,Object(s["a"])(Object(s["a"])({},l),{signal:a.signal}))];case 1:return h=m.sent(),h.ok?[3,3]:[4,h.clone().json()];case 2:throw p=m.sent(),new Error(p.detail?p.detail:"There was an error with this request ("+h.status+")");case 3:return[4,h.clone().json().catch((function(){return h.text()}))];case 4:return g=m.sent(),clearTimeout(u),[2,g]}}))}))},o=function(t){return"AbortError"===t.name?"The request took too long, please check your Internet connection or try again later.":t.message};e["a"]={request:n,getTextError:o}},fe26:function(t,e,i){}}]);
//# sourceMappingURL=chunk-3a94ca0c.9ab61d53.js.map