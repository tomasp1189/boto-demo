(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ae2b5e3"],{1:function(t,e){},1132:function(t,e,n){(function(e,r){t.exports=r(n("21bf"))})(0,(function(t){return function(){var e=t,n=e.lib,r=n.WordArray,o=e.enc;o.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var s=e[i>>>2]>>>24-i%4*8&255,a=e[i+1>>>2]>>>24-(i+1)%4*8&255,c=e[i+2>>>2]>>>24-(i+2)%4*8&255,u=s<<16|a<<8|c,h=0;h<4&&i+.75*h<n;h++)o.push(r.charAt(u>>>6*(3-h)&63));var f=r.charAt(64);if(f)while(o.length%4)o.push(f);return o.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return i(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function i(t,e,n){for(var o=[],i=0,s=0;s<e;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2,c=n[t.charCodeAt(s)]>>>6-s%4*2,u=a|c;o[i>>>2]|=u<<24-i%4*8,i++}return r.create(o,i)}}(),t.enc.Base64}))},"21bf":function(t,e,n){(function(e){(function(e,n){t.exports=n()})(0,(function(){var t=t||function(t,r){var o;if("undefined"!==typeof window&&window.crypto&&(o=window.crypto),"undefined"!==typeof self&&self.crypto&&(o=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(o=globalThis.crypto),!o&&"undefined"!==typeof window&&window.msCrypto&&(o=window.msCrypto),!o&&"undefined"!==typeof e&&e.crypto&&(o=e.crypto),!o)try{o=n(1)}catch(g){}var i=function(){if(o){if("function"===typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"===typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},c=a.lib={},u=c.Base=function(){return{extend:function(t){var e=s(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=c.WordArray=u.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=e!=r?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var a=0;a<o;a+=4)e[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new h.init(e,t)}}),f=a.enc={},l=f.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new h.init(n,e/2)}},d=f.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new h.init(n,e)}},p=f.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},w=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=4*s,c=i/a;c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0);var u=c*s,f=t.min(4*u,i);if(u){for(var l=0;l<u;l+=s)this._doProcessBlock(o,l);n=o.splice(0,u),r.sigBytes-=f}return new h.init(n,f)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),y=(c.Hasher=w.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new y.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math);return t}))}).call(this,n("c8ba"))},"625b":function(t,e,n){"use strict";n.r(e);var r=n("7a23"),o={class:"d-flex flex-column min-vh-100 justify-content-center align-items-center"},i=["src"];function s(t,e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[Object(r["createElementVNode"])("img",{src:t.context+"img/loading.svg"},null,8,i)])}var a=n("9ab4"),c=n("94f8"),u=n.n(c),h=n("1132"),f=n.n(h),l=n("5502"),d=function(t){return t&&Object.keys(t).length>0},p=Object(r["defineComponent"])({name:"Callback",data:function(){return{context:"/boto-demo/"}},computed:Object(a["a"])({},Object(l["d"])("editor",["template"])),methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(l["c"])("editor",["setTemplate"])),Object(l["c"])("auth",["setAuthToken","setLocalStorageAuthToken","removeLocalStorageAuthToken"])),{error:function(t,e){this.removeLocalStorageAuthToken(),this.$auth.logout({returnTo:window.location.origin+this.context+"error?error="+encodeURI(t)+"&error_description="+encodeURI(e)})},changePassword:function(t,e,n){return Object(a["b"])(this,void 0,void 0,(function(){var r,o,i,s;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return r=new Headers,r.append("Authorization","Token "+n),o=new FormData,o.append("new_password",f.a.stringify(u()(t))),o.append("current_password",f.a.stringify(u()(e))),i={method:"POST",headers:r,body:o},[4,fetch("https://api.boto.io/auth/users/set_password/",i)];case 1:return s=a.sent(),[2,s]}}))}))},login:function(t,e){return Object(a["b"])(this,void 0,void 0,(function(){var n,r,o;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return n=new FormData,n.append("username",t),n.append("password",f.a.stringify(u()(e))),r={method:"POST",body:n},[4,fetch("https://api.boto.io/auth/token/login",r)];case 1:return o=i.sent(),[2,o]}}))}))},newUser:function(t,e){return Object(a["b"])(this,void 0,void 0,(function(){var n,r,o;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return n=new FormData,n.append("username",t),n.append("password",f.a.stringify(u()(e))),r={method:"POST",body:n},[4,fetch("https://api.boto.io/auth/users/",r)];case 1:return o=i.sent(),[2,o]}}))}))}}),created:function(){return Object(a["b"])(this,void 0,void 0,(function(){var t,e,n,r,o,i,s,c,u,h,f,l,p,w,y,g;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return this.$route.query.error?(this.error(this.$route.query.error.toString(),this.$route.query.error_description.toString()),[3,18]):[3,1];case 1:t=this.template,e=this.$auth,n=e.user.value.sub,r=e.user.value.email,a.label=2;case 2:if(a.trys.push([2,17,,18]),!r||!n)throw new Error("No user found");return o="dashboard",i={},d(t)&&(console.log("template callback",t),o="editor",i={templateId:null===t||void 0===t?void 0:t.clone_of,type:"recipe"}),console.log("template callback",{template:t,path:o,query:i}),[4,this.newUser(r,n)];case 3:return s=a.sent(),[4,s.json()];case 4:return c=a.sent(),c.username?[4,this.login(r,n)]:[3,15];case 5:return u=a.sent(),u.ok?[4,u.json()]:[3,7];case 6:return h=a.sent(),this.setAuthToken(h.auth_token),this.setLocalStorageAuthToken(h.auth_token),this.$router.push({path:o,query:i}),[3,14];case 7:return 400!==u.status?[3,13]:[4,this.login(r,e.sub)];case 8:return f=a.sent(),[4,f.json()];case 9:return l=a.sent(),[4,this.changePassword(n,e.sub,l.auth_token)];case 10:return a.sent(),[4,this.login(r,n)];case 11:return p=a.sent(),[4,p.json()];case 12:return w=a.sent(),p.ok?(this.setAuthToken(w.auth_token),this.setLocalStorageAuthToken(w.auth_token),this.$router.push({path:o,query:i})):(y=w.non_field_errors[0],this.error("There was an error with the request ("+y+")",y)),[3,14];case 13:this.error("There was an error with the request ("+u.status+")",u.statusText),a.label=14;case 14:return[3,16];case 15:this.error("There was an error with the request.","400"),a.label=16;case 16:return[3,18];case 17:return g=a.sent(),this.error("There was an error with the request.",g),[3,18];case 18:return[2]}}))}))}}),w=n("6b0d"),y=n.n(w);const g=y()(p,[["render",s]]);e["default"]=g},"94f8":function(t,e,n){(function(e,r){t.exports=r(n("21bf"))})(0,(function(t){return function(e){var n=t,r=n.lib,o=r.WordArray,i=r.Hasher,s=n.algo,a=[],c=[];(function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}var r=2,o=0;while(o<64)t(r)&&(o<8&&(a[o]=n(e.pow(r,.5))),c[o]=n(e.pow(r,1/3)),o++),r++})();var u=[],h=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],h=n[5],f=n[6],l=n[7],d=0;d<64;d++){if(d<16)u[d]=0|t[e+d];else{var p=u[d-15],w=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=u[d-2],g=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;u[d]=w+u[d-7]+g+u[d-16]}var v=a&h^~a&f,b=r&o^r&i^o&i,m=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),k=l+_+v+c[d]+u[d],j=m+b;l=f,f=h,h=a,a=s+k|0,s=i,i=o,o=r,r=k+j|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+h|0,n[6]=n[6]+f|0,n[7]=n[7]+l|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=i._createHelper(h),n.HmacSHA256=i._createHmacHelper(h)}(Math),t.SHA256}))}}]);
//# sourceMappingURL=chunk-4ae2b5e3.fc6f7135.js.map