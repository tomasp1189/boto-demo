{"version":3,"sources":["webpack:///./src/layouts/External/External.css","webpack:///./src/modules/External/Slack/Slack.css?fb9a","webpack:///./src/modules/External/Slack/Slack.html","webpack:///./src/layouts/External/External.html","webpack:///./src/layouts/External/External.ts","webpack:///./src/layouts/External/index.vue","webpack:///./src/modules/External/Slack/Slack.ts","webpack:///./src/modules/External/Slack/index.vue","webpack:///./src/enums/HttpRequestMethod.ts","webpack:///./src/util/HttpClient.ts"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","key","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","render","_ctx","_cache","src","context","width","alt","title","onClick","closeWindow","args","$slots","undefined","__exports__","name","components","ExternalLayout","setup","store","data","pars","authToken","loading","showConfirmation","computed","methods","window","close","mounted","code","this","$route","query","state","url","formdata","FormData","append","toString","HttpClient","request","HttpRequestMethod","POST","response","ok","Error","message","routes","push","params","actionOutcome","actionMessage","channel_id","console","error","type","body","form","controller","AbortController","headers","Headers","requestOptions","method","cache","timeout","id","setTimeout","abort","log","fetch","signal","clone","json","detail","status","catch","text","result","clearTimeout","getTextError","e"],"mappings":"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","file":"js/chunk-e69b37f4-legacy.02453c0e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!./External.css?vue&type=style&index=0&id=bb137160&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!./Slack.css?vue&type=style&index=0&lang=css\"","import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"d-flex flex-column min-vh-100 justify-content-center align-items-center\" }\nconst _hoisted_2 = [\"src\"]\nconst _hoisted_3 = { key: 1 }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"i\", { class: \"fas fa-check-circle fa-5x text-success\" }, null, -1)\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"h3\", { class: \"mt-4\" }, \"Yesss! You can now use Slack in your Botos :-)\", -1)\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"p\", { class: \"mt-4\" }, \"Click refresh to select the new channel.\", -1)\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_ctx.loading)\n      ? (_openBlock(), _createElementBlock(\"img\", {\n          key: 0,\n          src: `${_ctx.context}img/loading.svg`\n        }, null, 8, _hoisted_2))\n      : _createCommentVNode(\"\", true),\n    (_ctx.showConfirmation)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _hoisted_5,\n          _createElementVNode(\"img\", {\n            class: \"mt-4\",\n            src: `${_ctx.context}img/animations/refresh_dropdown.gif`,\n            width: \"300\",\n            alt: \"Animation: Click refresh to select the new channel.\",\n            title: \"Click refresh to select the new channel.\"\n          }, null, 8, _hoisted_6),\n          _hoisted_7,\n          _createElementVNode(\"button\", {\n            onClick: _cache[0] || (_cache[0] = (...args) => (_ctx.closeWindow && _ctx.closeWindow(...args))),\n            class: \"boto-button large primary-btn mt-4\"\n          }, \"Go back to Editor\")\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}","import { renderSlot as _renderSlot, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-bb137160\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"wrapper\" }\nconst _hoisted_2 = { class: \"main\" }\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = { class: \"container-fluid p-0 h-100\" }\nconst _hoisted_5 = { class: \"row mb-2 mb-xl-3 h-100\" }\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"main\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _renderSlot(_ctx.$slots, \"default\", {}, undefined, true)\n          ])\n        ])\n      ])\n    ])\n  ]))\n}","import { defineComponent } from \"vue\";\nexport default defineComponent({});\n","import { render } from \"./External.html?vue&type=template&id=bb137160&scoped=true&ts=true\"\nimport script from \"./External.ts?vue&type=script&lang=ts\"\nexport * from \"./External.ts?vue&type=script&lang=ts\"\n\nimport \"./External.css?vue&type=style&index=0&id=bb137160&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/tomaspuricelli/Dev/botoapp/boto/web_client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bb137160\"]])\n\nexport default __exports__","import { defineComponent } from \"vue\";\nimport ExternalLayout from \"@/layouts/External/index.vue\";\nimport routes from \"@/routes\";\nimport HttpClient from \"@/util/HttpClient\";\nimport { HttpRequestMethod } from \"@/enums/HttpRequestMethod\";\nimport { mapState, useStore } from \"vuex\";\n\nexport default defineComponent({\n  name: \"Slack\",\n  components: {\n    ExternalLayout,\n  },\n  setup() {\n    const store = useStore();\n    return {\n      store,\n    };\n  },\n  data() {\n    return {\n      context: process.env.VUE_APP_CONTEXT,\n      pars: \"\",\n      authToken: null,\n      loading: false,\n      showConfirmation: false,\n    };\n  },\n  computed: {\n    ...mapState(\"auth\", [\"authToken\"]),\n  },\n  methods: {\n    closeWindow() {\n      window.close();\n    },\n  },\n  async mounted() {\n    try {\n      const code = this.$route.query.code;\n      const state = this.$route.query.state;\n      this.loading = true;\n      if (code) {\n        const url = `https://${process.env.VUE_APP_BOTO_API_DOMAIN}/app/slack/oauth/`;\n        const formdata = new FormData();\n        formdata.append(\"code\", code.toString());\n        const response = await HttpClient.request(\n          url,\n          this.authToken!,\n          HttpRequestMethod.POST,\n          formdata,\n          true\n        );\n        if (!response.ok) {\n          throw new Error(`${response.message} (${response[\"slack-message\"]})`);\n        }\n        if (state === \"from_editor\") {\n          this.loading = false;\n          this.showConfirmation = true;\n        } else {\n          routes.push({\n            name: \"home.integrations\",\n            params: {\n              actionOutcome: \"success\",\n              actionMessage: `Yesss! You can now use Slack in your Botos :-) Please use the following channel_id for your Boto: ${response.channel_id}`,\n            },\n          });\n        }\n      } else {\n        throw new Error(\"Could not authorize Slack\");\n      }\n    } catch (e: any) {\n      console.error(e);\n      routes.push({\n        name: \"home.integrations\",\n        params: { actionOutcome: \"error\", actionMessage: e.toString() },\n      });\n    }\n  },\n});\n","import { render } from \"./Slack.html?vue&type=template&id=4a9ab058&ts=true\"\nimport script from \"./Slack.ts?vue&type=script&lang=ts\"\nexport * from \"./Slack.ts?vue&type=script&lang=ts\"\n\nimport \"./Slack.css?vue&type=style&index=0&lang=css\"\n\nimport exportComponent from \"/Users/tomaspuricelli/Dev/botoapp/boto/web_client/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export enum HttpRequestMethod {\n  GET = \"get\",\n  POST = \"post\",\n  PUT = \"put\",\n  DELETE = \"delete\",\n}\n","import { HttpRequestMethod } from \"@/enums/HttpRequestMethod\";\n\nconst request = async (\n  url: string,\n  authToken: string | null,\n  type: HttpRequestMethod,\n  body?: unknown | null,\n  form?: boolean | null\n) => {\n  const controller = new AbortController();\n  const headers = new Headers();\n  if (!form) headers.append(\"Content-Type\", \"application/json\");\n  if (authToken) headers.append(\"Authorization\", `Token ${authToken}`);\n  const requestOptions: { [k: string]: any } = {\n    method: type,\n    headers,\n    cache: \"no-store\",\n  };\n  const { timeout = 8000 } = requestOptions;\n  const id = setTimeout(() => controller.abort(), timeout);\n  if (body) requestOptions[\"body\"] = body;\n  console.log({ url, authToken, type, body, form });\n  const response = await fetch(url, {\n    ...requestOptions,\n    signal: controller.signal,\n  });\n  if (!response.ok) {\n    const json = await response.clone().json();\n    throw new Error(\n      json.detail\n        ? json.detail\n        : `There was an error with this request (${response.status})`\n    );\n  }\n  // TODO: workaround to fix API issue\n  const result = await response\n    .clone()\n    .json()\n    .catch(() => response.text());\n  clearTimeout(id);\n  return result;\n};\n\nconst getTextError = (e: any) => {\n  return e.name === \"AbortError\"\n    ? \"The request took too long, please check your Internet connection or try again later.\"\n    : e.message;\n};\n\nexport default {\n  request,\n  getTextError,\n};\n"],"sourceRoot":""}